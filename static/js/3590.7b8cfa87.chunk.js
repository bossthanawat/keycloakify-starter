/*! For license information please see 3590.7b8cfa87.chunk.js.LICENSE.txt */
(self.webpackChunkkeycloakify_starter=self.webpackChunkkeycloakify_starter||[]).push([[3590],{456:function(e,t,r){"use strict";function n(e){this.message=e}r.r(t),r.d(t,{InvalidTokenError:function(){return s}}),n.prototype=new Error,n.prototype.name="InvalidCharacterError";var i="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new n("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,i,a=0,s=0,o="";i=t.charAt(s++);~i&&(r=a%4?64*r+i:i,a++%4)?o+=String.fromCharCode(255&r>>(-2*a&6)):0)i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(i);return o};function a(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(i(e).replace(/(.)/g,(function(e,t){var r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r})))}(t)}catch(e){return i(t)}}function s(e){this.message=e}s.prototype=new Error,s.prototype.name="InvalidTokenError",t.default=function(e,t){if("string"!=typeof e)throw new s("Invalid token specified");var r=!0===(t=t||{}).header?0:1;try{return JSON.parse(a(e.split(".")[r]))}catch(e){throw new s("Invalid token specified: "+e.message)}}},7187:function(e,t,r){"use strict";var n,i=r(2122).default,a=r(215).default,s=r(3496).default,o=r(6115).default,u=r(1655).default,c=r(6389).default,l=r(1588).default,d=r(3808).default,f=r(7424).default,p=r(3012).default,h=r(7061).default,v=r(7156).default,g=r(861).default,y=r(6690).default,_=r(9728).default,m=r(4704).default,k=["timeoutInSeconds"],w=["grant_type","redirect_uri","client_id","client_secret"],b=["grant_type","client_id","client_secret","scope"],x=["grant_type","client_id","client_secret","timeoutInSeconds"],S=["url","authority","client_id","redirect_uri","response_type","scope","state_data","response_mode","request_type","client_secret","nonce","url_state","resource","skipUserInfo","extraQueryParams","extraTokenParams","disablePKCE"],T=["redirectMethod"],Z=["popupWindowFeatures","popupWindowTarget"],O=["silentRequestTimeoutInSeconds"],E=["silentRequestTimeoutInSeconds"],P=["redirectMethod"],I=["popupWindowFeatures","popupWindowTarget"],j=["silentRequestTimeoutInSeconds"],R=Object.defineProperty,C=Object.getOwnPropertyDescriptor,U=Object.getOwnPropertyNames,N=Object.prototype.hasOwnProperty,M={};!function(e,t){for(var r in t)R(e,r,{get:t[r],enumerable:!0})}(M,{AccessTokenEvents:function(){return X},CheckSessionIFrame:function(){return ee},ErrorResponse:function(){return G},ErrorTimeout:function(){return Y},InMemoryWebStorage:function(){return te},Log:function(){return W},Logger:function(){return F},MetadataService:function(){return ne},OidcClient:function(){return me},OidcClientSettingsStore:function(){return ae},SessionMonitor:function(){return ke},SigninResponse:function(){return pe},SigninState:function(){return le},SignoutResponse:function(){return ve},State:function(){return ce},User:function(){return we},UserManager:function(){return Ne},UserManagerSettingsStore:function(){return Ze},Version:function(){return Me},WebStorageStateStore:function(){return ie}}),e.exports=(n=M,function(e,t,r,n){if(t&&"object"===typeof t||"function"===typeof t){var i,a=m(U(t));try{var s=function(){var a=i.value;N.call(e,a)||a===r||R(e,a,{get:function(){return t[a]},enumerable:!(n=C(t,a))||n.enumerable})};for(a.s();!(i=a.n()).done;)s()}catch(o){a.e(o)}finally{a.f()}}return e}(R({},"__esModule",{value:!0}),n));var A,L,q,D={debug:function(){},info:function(){},warn:function(){},error:function(){}},W=function(e){return e[e.NONE=0]="NONE",e[e.ERROR=1]="ERROR",e[e.WARN=2]="WARN",e[e.INFO=3]="INFO",e[e.DEBUG=4]="DEBUG",e}(W||{});(q=W||(W={})).reset=function(){A=3,L=D},q.setLevel=function(e){if(!(0<=e&&e<=4))throw new Error("Invalid log level");A=e},q.setLogger=function(e){L=e};var F=function(){function e(t){y(this,e),this._name=t}return _(e,[{key:"debug",value:function(){if(A>=4){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];(t=L).debug.apply(t,[e._format(this._name,this._method)].concat(n))}}},{key:"info",value:function(){if(A>=3){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];(t=L).info.apply(t,[e._format(this._name,this._method)].concat(n))}}},{key:"warn",value:function(){if(A>=2){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];(t=L).warn.apply(t,[e._format(this._name,this._method)].concat(n))}}},{key:"error",value:function(){if(A>=1){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];(t=L).error.apply(t,[e._format(this._name,this._method)].concat(n))}}},{key:"throw",value:function(e){throw this.error(e),e}},{key:"create",value:function(e){var t=Object.create(this);return t._method=e,t.debug("begin"),t}}],[{key:"createStatic",value:function(t,r){var n=new e("".concat(t,".").concat(r));return n.debug("begin"),n}},{key:"_format",value:function(e,t){var r="[".concat(e,"]");return t?"".concat(r," ").concat(t,":"):r}},{key:"debug",value:function(t){if(A>=4){for(var r,n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];(r=L).debug.apply(r,[e._format(t)].concat(i))}}},{key:"info",value:function(t){if(A>=3){for(var r,n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];(r=L).info.apply(r,[e._format(t)].concat(i))}}},{key:"warn",value:function(t){if(A>=2){for(var r,n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];(r=L).warn.apply(r,[e._format(t)].concat(i))}}},{key:"error",value:function(t){if(A>=1){for(var r,n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];(r=L).error.apply(r,[e._format(t)].concat(i))}}}]),e}();W.reset();var H=function(e){return btoa(g(new Uint8Array(e)).map((function(e){return String.fromCharCode(e)})).join(""))},z=function(){function e(){y(this,e)}return _(e,null,[{key:"_randomWord",value:function(){var e=new Uint32Array(1);return crypto.getRandomValues(e),e[0]}},{key:"generateUUIDv4",value:function(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(function(t){return(+t^e._randomWord()&15>>+t/4).toString(16)})).replace(/-/g,"")}},{key:"generateCodeVerifier",value:function(){return e.generateUUIDv4()+e.generateUUIDv4()+e.generateUUIDv4()}},{key:"generateCodeChallenge",value:function(){var e=v(h().mark((function e(t){var r,n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(crypto.subtle){e.next=2;break}throw new Error("Crypto.subtle is available only in secure contexts (HTTPS).");case 2:return e.prev=2,r=new TextEncoder,n=r.encode(t),e.next=7,crypto.subtle.digest("SHA-256",n);case 7:return i=e.sent,e.abrupt("return",H(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""));case 11:throw e.prev=11,e.t0=e.catch(2),F.error("CryptoUtils.generateCodeChallenge",e.t0),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"generateBasicAuth",value:function(e,t){var r=(new TextEncoder).encode([e,t].join(":"));return H(r)}}]),e}(),K=function(){function e(t){y(this,e),this._name=t,this._logger=new F("Event('".concat(this._name,"')")),this._callbacks=[]}return _(e,[{key:"addHandler",value:function(e){var t=this;return this._callbacks.push(e),function(){return t.removeHandler(e)}}},{key:"removeHandler",value:function(e){var t=this._callbacks.lastIndexOf(e);t>=0&&this._callbacks.splice(t,1)}},{key:"raise",value:function(){var e=v(h().mark((function e(){var t,r,n,i,a,s,o,u=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=u.length,n=new Array(r),i=0;i<r;i++)n[i]=u[i];(t=this._logger).debug.apply(t,["raise:"].concat(n)),a=m(this._callbacks),e.prev=3,a.s();case 5:if((s=a.n()).done){e.next=11;break}return o=s.value,e.next=9,o.apply(void 0,n);case 9:e.next=5;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),a.e(e.t0);case 16:return e.prev=16,a.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[3,13,16,19]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),V=r(8694),J=function(){function e(){y(this,e)}return _(e,null,[{key:"decode",value:function(e){try{return(0,V.jwtDecode)(e)}catch(t){throw F.error("JwtUtils.decode",t),t}}}]),e}(),B=function(){function e(){y(this,e)}return _(e,null,[{key:"center",value:function(e){var t,r=Object.assign({},(p(e),e));return null==r.width&&(r.width=null!=(t=[800,720,600,480].find((function(e){return e<=window.outerWidth/1.618})))?t:360),null!=r.left||(r.left=Math.max(0,Math.round(window.screenX+(window.outerWidth-r.width)/2))),null!=r.height&&(null!=r.top||(r.top=Math.max(0,Math.round(window.screenY+(window.outerHeight-r.height)/2)))),r}},{key:"serialize",value:function(e){return Object.entries(e).filter((function(e){return null!=f(e,2)[1]})).map((function(e){var t=f(e,2),r=t[0],n=t[1];return"".concat(r,"=").concat("boolean"!==typeof n?n:n?"yes":"no")})).join(",")}}]),e}(),Q=function(e){u(r,e);var t=c(r);function r(){var e,n;return y(this,r),(n=t.apply(this,arguments))._logger=new F("Timer('".concat(n._name,"')")),n._timerHandle=null,n._expiration=0,n._callback=function(){var t=n._expiration-r.getEpochTime();n._logger.debug("timer completes in",t),n._expiration<=r.getEpochTime()&&(n.cancel(),l((e=o(n),d(r.prototype)),"raise",e).call(e))},n}return _(r,[{key:"init",value:function(e){var t=this._logger.create("init");e=Math.max(Math.floor(e),1);var n=r.getEpochTime()+e;if(this.expiration===n&&this._timerHandle)t.debug("skipping since already initialized for expiration at",this.expiration);else{this.cancel(),t.debug("using duration",e),this._expiration=n;var i=Math.min(e,5);this._timerHandle=setInterval(this._callback,1e3*i)}}},{key:"expiration",get:function(){return this._expiration}},{key:"cancel",value:function(){this._logger.create("cancel"),this._timerHandle&&(clearInterval(this._timerHandle),this._timerHandle=null)}}],[{key:"getEpochTime",value:function(){return Math.floor(Date.now()/1e3)}}]),r}(K),$=function(){function e(){y(this,e)}return _(e,null,[{key:"readParams",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"query";if(!e)throw new TypeError("Invalid URL");var r=new URL(e,"http://127.0.0.1")["fragment"===t?"hash":"search"];return new URLSearchParams(r.slice(1))}}]),e}(),G=function(e){u(r,e);var t=c(r);function r(e,n){var i,a,s,o;if(y(this,r),(i=t.call(this,e.error_description||e.error||"")).form=n,i.name="ErrorResponse",!e.error)throw F.error("ErrorResponse","No error passed"),new Error("No error passed");return i.error=e.error,i.error_description=null!=(a=e.error_description)?a:null,i.error_uri=null!=(s=e.error_uri)?s:null,i.state=e.userState,i.session_state=null!=(o=e.session_state)?o:null,i.url_state=e.url_state,i}return _(r)}(s(Error)),Y=function(e){u(r,e);var t=c(r);function r(e){var n;return y(this,r),(n=t.call(this,e)).name="ErrorTimeout",n}return _(r)}(s(Error)),X=function(){function e(t){y(this,e),this._logger=new F("AccessTokenEvents"),this._expiringTimer=new Q("Access token expiring"),this._expiredTimer=new Q("Access token expired"),this._expiringNotificationTimeInSeconds=t.expiringNotificationTimeInSeconds}return _(e,[{key:"load",value:function(e){var t=this._logger.create("load");if(e.access_token&&void 0!==e.expires_in){var r=e.expires_in;if(t.debug("access token present, remaining duration:",r),r>0){var n=r-this._expiringNotificationTimeInSeconds;n<=0&&(n=1),t.debug("registering expiring timer, raising in",n,"seconds"),this._expiringTimer.init(n)}else t.debug("canceling existing expiring timer because we're past expiration."),this._expiringTimer.cancel();var i=r+1;t.debug("registering expired timer, raising in",i,"seconds"),this._expiredTimer.init(i)}else this._expiringTimer.cancel(),this._expiredTimer.cancel()}},{key:"unload",value:function(){this._logger.debug("unload: canceling existing access token timers"),this._expiringTimer.cancel(),this._expiredTimer.cancel()}},{key:"addAccessTokenExpiring",value:function(e){return this._expiringTimer.addHandler(e)}},{key:"removeAccessTokenExpiring",value:function(e){this._expiringTimer.removeHandler(e)}},{key:"addAccessTokenExpired",value:function(e){return this._expiredTimer.addHandler(e)}},{key:"removeAccessTokenExpired",value:function(e){this._expiredTimer.removeHandler(e)}}]),e}(),ee=function(){function e(t,r,n,i,a){var s=this;y(this,e),this._callback=t,this._client_id=r,this._intervalInSeconds=i,this._stopOnError=a,this._logger=new F("CheckSessionIFrame"),this._timer=null,this._session_state=null,this._message=function(e){e.origin===s._frame_origin&&e.source===s._frame.contentWindow&&("error"===e.data?(s._logger.error("error message from check session op iframe"),s._stopOnError&&s.stop()):"changed"===e.data?(s._logger.debug("changed message from check session op iframe"),s.stop(),s._callback()):s._logger.debug(e.data+" message from check session op iframe"))};var o=new URL(n);this._frame_origin=o.origin,this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="fixed",this._frame.style.left="-1000px",this._frame.style.top="0",this._frame.width="0",this._frame.height="0",this._frame.src=o.href}return _(e,[{key:"load",value:function(){var e=this;return new Promise((function(t){e._frame.onload=function(){t()},window.document.body.appendChild(e._frame),window.addEventListener("message",e._message,!1)}))}},{key:"start",value:function(e){var t=this;if(this._session_state!==e){this._logger.create("start"),this.stop(),this._session_state=e;var r=function(){t._frame.contentWindow&&t._session_state&&t._frame.contentWindow.postMessage(t._client_id+" "+t._session_state,t._frame_origin)};r(),this._timer=setInterval(r,1e3*this._intervalInSeconds)}}},{key:"stop",value:function(){this._logger.create("stop"),this._session_state=null,this._timer&&(clearInterval(this._timer),this._timer=null)}}]),e}(),te=function(){function e(){y(this,e),this._logger=new F("InMemoryWebStorage"),this._data={}}return _(e,[{key:"clear",value:function(){this._logger.create("clear"),this._data={}}},{key:"getItem",value:function(e){return this._logger.create("getItem('".concat(e,"')")),this._data[e]}},{key:"setItem",value:function(e,t){this._logger.create("setItem('".concat(e,"')")),this._data[e]=t}},{key:"removeItem",value:function(e){this._logger.create("removeItem('".concat(e,"')")),delete this._data[e]}},{key:"length",get:function(){return Object.getOwnPropertyNames(this._data).length}},{key:"key",value:function(e){return Object.getOwnPropertyNames(this._data)[e]}}]),e}(),re=function(){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};y(this,e),this._jwtHandler=n,this._extraHeaders=i,this._logger=new F("JsonService"),this._contentTypes=[],(t=this._contentTypes).push.apply(t,g(r).concat(["application/json"])),n&&this._contentTypes.push("application/jwt")}return _(e,[{key:"fetchWithTimeout",value:function(){var e=v(h().mark((function e(t){var r,n,s,o,u,c,l=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(r=l.length>1&&void 0!==l[1]?l[1]:{}).timeoutInSeconds,s=a(r,k),n){e.next=6;break}return e.next=5,fetch(t,s);case 5:return e.abrupt("return",e.sent);case 6:return o=new AbortController,u=setTimeout((function(){return o.abort()}),1e3*n),e.prev=8,e.next=11,fetch(t,i(i({},r),{},{signal:o.signal}));case 11:return c=e.sent,e.abrupt("return",c);case 15:if(e.prev=15,e.t0=e.catch(8),!(e.t0 instanceof DOMException&&"AbortError"===e.t0.name)){e.next=19;break}throw new Y("Network timed out");case 19:throw e.t0;case 20:return e.prev=20,clearTimeout(u),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[8,15,20,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getJson",value:function(){var e=v(h().mark((function e(t){var r,n,i,a,s,o,u,c,l=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(r=l.length>1&&void 0!==l[1]?l[1]:{}).token,i=r.credentials,a=this._logger.create("getJson"),s={Accept:this._contentTypes.join(", ")},n&&(a.debug("token passed, setting Authorization header"),s.Authorization="Bearer "+n),this.appendExtraHeaders(s),e.prev=5,a.debug("url:",t),e.next=9,this.fetchWithTimeout(t,{method:"GET",headers:s,credentials:i});case 9:o=e.sent,e.next=16;break;case 12:throw e.prev=12,e.t0=e.catch(5),a.error("Network Error"),e.t0;case 16:if(a.debug("HTTP response received, status",o.status),(u=o.headers.get("Content-Type"))&&!this._contentTypes.find((function(e){return u.startsWith(e)}))&&a.throw(new Error("Invalid response Content-Type: ".concat(null!=u?u:"undefined",", from URL: ").concat(t))),!(o.ok&&this._jwtHandler&&(null==u?void 0:u.startsWith("application/jwt")))){e.next=27;break}return e.t1=this,e.next=23,o.text();case 23:return e.t2=e.sent,e.next=26,e.t1._jwtHandler.call(e.t1,e.t2);case 26:return e.abrupt("return",e.sent);case 27:return e.prev=27,e.next=30,o.json();case 30:c=e.sent,e.next=39;break;case 33:if(e.prev=33,e.t3=e.catch(27),a.error("Error parsing JSON response",e.t3),!o.ok){e.next=38;break}throw e.t3;case 38:throw new Error("".concat(o.statusText," (").concat(o.status,")"));case 39:if(o.ok){e.next=44;break}if(a.error("Error from server:",c),!c.error){e.next=43;break}throw new G(c);case 43:throw new Error("".concat(o.statusText," (").concat(o.status,"): ").concat(JSON.stringify(c)));case 44:return e.abrupt("return",c);case 45:case"end":return e.stop()}}),e,this,[[5,12],[27,33]])})));return function(t){return e.apply(this,arguments)}}()},{key:"postForm",value:function(){var e=v(h().mark((function e(t,r){var n,i,a,s,o,u,c,l,d,f;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.body,i=r.basicAuth,a=r.timeoutInSeconds,s=r.initCredentials,o=this._logger.create("postForm"),u={Accept:this._contentTypes.join(", "),"Content-Type":"application/x-www-form-urlencoded"},void 0!==i&&(u.Authorization="Basic "+i),this.appendExtraHeaders(u),e.prev=5,o.debug("url:",t),e.next=9,this.fetchWithTimeout(t,{method:"POST",headers:u,body:n,timeoutInSeconds:a,credentials:s});case 9:c=e.sent,e.next=16;break;case 12:throw e.prev=12,e.t0=e.catch(5),o.error("Network error"),e.t0;case 16:if(o.debug("HTTP response received, status",c.status),!(l=c.headers.get("Content-Type"))||this._contentTypes.find((function(e){return l.startsWith(e)}))){e.next=20;break}throw new Error("Invalid response Content-Type: ".concat(null!=l?l:"undefined",", from URL: ").concat(t));case 20:return e.next=22,c.text();case 22:if(d=e.sent,f={},!d){e.next=35;break}e.prev=25,f=JSON.parse(d),e.next=35;break;case 29:if(e.prev=29,e.t1=e.catch(25),o.error("Error parsing JSON response",e.t1),!c.ok){e.next=34;break}throw e.t1;case 34:throw new Error("".concat(c.statusText," (").concat(c.status,")"));case 35:if(c.ok){e.next=40;break}if(o.error("Error from server:",f),!f.error){e.next=39;break}throw new G(f,n);case 39:throw new Error("".concat(c.statusText," (").concat(c.status,"): ").concat(JSON.stringify(f)));case 40:return e.abrupt("return",f);case 41:case"end":return e.stop()}}),e,this,[[5,12],[25,29]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"appendExtraHeaders",value:function(e){var t=this,r=this._logger.create("appendExtraHeaders"),n=Object.keys(this._extraHeaders),i=["authorization","accept","content-type"];0!==n.length&&n.forEach((function(n){if(i.includes(n.toLocaleLowerCase()))r.warn("Protected header could not be overridden",n,i);else{var a="function"===typeof t._extraHeaders[n]?t._extraHeaders[n]():t._extraHeaders[n];a&&""!==a&&(e[n]=a)}}))}}]),e}(),ne=function(){function e(t){y(this,e),this._settings=t,this._logger=new F("MetadataService"),this._signingKeys=null,this._metadata=null,this._metadataUrl=this._settings.metadataUrl,this._jsonService=new re(["application/jwk-set+json"],null,this._settings.extraHeaders),this._settings.signingKeys&&(this._logger.debug("using signingKeys from settings"),this._signingKeys=this._settings.signingKeys),this._settings.metadata&&(this._logger.debug("using metadata from settings"),this._metadata=this._settings.metadata),this._settings.fetchRequestCredentials&&(this._logger.debug("using fetchRequestCredentials from settings"),this._fetchRequestCredentials=this._settings.fetchRequestCredentials)}return _(e,[{key:"resetSigningKeys",value:function(){this._signingKeys=null}},{key:"getMetadata",value:function(){var e=v(h().mark((function e(){var t,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._logger.create("getMetadata"),!this._metadata){e.next=4;break}return t.debug("using cached values"),e.abrupt("return",this._metadata);case 4:if(this._metadataUrl){e.next=7;break}throw t.throw(new Error("No authority or metadataUrl configured on settings")),null;case 7:return t.debug("getting metadata from",this._metadataUrl),e.next=10,this._jsonService.getJson(this._metadataUrl,{credentials:this._fetchRequestCredentials});case 10:return r=e.sent,t.debug("merging remote JSON with seed metadata"),this._metadata=Object.assign({},this._settings.metadataSeed,r),e.abrupt("return",this._metadata);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getIssuer",value:function(){return this._getMetadataProperty("issuer")}},{key:"getAuthorizationEndpoint",value:function(){return this._getMetadataProperty("authorization_endpoint")}},{key:"getUserInfoEndpoint",value:function(){return this._getMetadataProperty("userinfo_endpoint")}},{key:"getTokenEndpoint",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._getMetadataProperty("token_endpoint",e)}},{key:"getCheckSessionIframe",value:function(){return this._getMetadataProperty("check_session_iframe",!0)}},{key:"getEndSessionEndpoint",value:function(){return this._getMetadataProperty("end_session_endpoint",!0)}},{key:"getRevocationEndpoint",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._getMetadataProperty("revocation_endpoint",e)}},{key:"getKeysEndpoint",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._getMetadataProperty("jwks_uri",e)}},{key:"_getMetadataProperty",value:function(){var e=v(h().mark((function e(t){var r,n,i,a=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]&&a[1],n=this._logger.create("_getMetadataProperty('".concat(t,"')")),e.next=4,this.getMetadata();case 4:if(i=e.sent,n.debug("resolved"),void 0!==i[t]){e.next=11;break}if(!0!==r){e.next=10;break}return n.warn("Metadata does not contain optional property"),e.abrupt("return",void 0);case 10:n.throw(new Error("Metadata does not contain property "+t));case 11:return e.abrupt("return",i[t]);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSigningKeys",value:function(){var e=v(h().mark((function e(){var t,r,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._logger.create("getSigningKeys"),!this._signingKeys){e.next=4;break}return t.debug("returning signingKeys from cache"),e.abrupt("return",this._signingKeys);case 4:return e.next=6,this.getKeysEndpoint(!1);case 6:return r=e.sent,t.debug("got jwks_uri",r),e.next=10,this._jsonService.getJson(r);case 10:if(n=e.sent,t.debug("got key set",n),Array.isArray(n.keys)){e.next=15;break}throw t.throw(new Error("Missing keys on keyset")),null;case 15:return this._signingKeys=n.keys,e.abrupt("return",this._signingKeys);case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),ie=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.prefix,n=void 0===r?"oidc.":r,i=t.store,a=void 0===i?localStorage:i;y(this,e),this._logger=new F("WebStorageStateStore"),this._store=a,this._prefix=n}return _(e,[{key:"set",value:function(){var e=v(h().mark((function e(t,r){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._logger.create("set('".concat(t,"')")),t=this._prefix+t,e.next=4,this._store.setItem(t,r);case 4:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=v(h().mark((function e(t){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._logger.create("get('".concat(t,"')")),t=this._prefix+t,e.next=4,this._store.getItem(t);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=v(h().mark((function e(t){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._logger.create("remove('".concat(t,"')")),t=this._prefix+t,e.next=4,this._store.getItem(t);case 4:return r=e.sent,e.next=7,this._store.removeItem(t);case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllKeys",value:function(){var e=v(h().mark((function e(){var t,r,n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._logger.create("getAllKeys"),e.next=3,this._store.length;case 3:t=e.sent,r=[],n=0;case 6:if(!(n<t)){e.next=14;break}return e.next=9,this._store.key(n);case 9:(i=e.sent)&&0===i.indexOf(this._prefix)&&r.push(i.substr(this._prefix.length));case 11:n++,e.next=6;break;case 14:return e.abrupt("return",r);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),ae=_((function e(t){var r=t.authority,n=t.metadataUrl,i=t.metadata,a=t.signingKeys,s=t.metadataSeed,o=t.client_id,u=t.client_secret,c=t.response_type,l=void 0===c?"code":c,d=t.scope,f=void 0===d?"openid":d,p=t.redirect_uri,h=t.post_logout_redirect_uri,v=t.client_authentication,g=void 0===v?"client_secret_post":v,_=t.prompt,m=t.display,k=t.max_age,w=t.ui_locales,b=t.acr_values,x=t.resource,S=t.response_mode,T=t.filterProtocolClaims,Z=void 0===T||T,O=t.loadUserInfo,E=void 0!==O&&O,P=t.staleStateAgeInSeconds,I=void 0===P?900:P,j=t.mergeClaimsStrategy,R=void 0===j?{array:"replace"}:j,C=t.disablePKCE,U=void 0!==C&&C,N=t.stateStore,M=t.revokeTokenAdditionalContentTypes,A=t.fetchRequestCredentials,L=t.refreshTokenAllowedScope,q=t.extraQueryParams,D=void 0===q?{}:q,W=t.extraTokenParams,F=void 0===W?{}:W,H=t.extraHeaders,z=void 0===H?{}:H;if(y(this,e),this.authority=r,n?this.metadataUrl=n:(this.metadataUrl=r,r&&(this.metadataUrl.endsWith("/")||(this.metadataUrl+="/"),this.metadataUrl+=".well-known/openid-configuration")),this.metadata=i,this.metadataSeed=s,this.signingKeys=a,this.client_id=o,this.client_secret=u,this.response_type=l,this.scope=f,this.redirect_uri=p,this.post_logout_redirect_uri=h,this.client_authentication=g,this.prompt=_,this.display=m,this.max_age=k,this.ui_locales=w,this.acr_values=b,this.resource=x,this.response_mode=S,this.filterProtocolClaims=null==Z||Z,this.loadUserInfo=!!E,this.staleStateAgeInSeconds=I,this.mergeClaimsStrategy=R,this.disablePKCE=!!U,this.revokeTokenAdditionalContentTypes=M,this.fetchRequestCredentials=A||"same-origin",N)this.stateStore=N;else{var K="undefined"!==typeof window?window.localStorage:new te;this.stateStore=new ie({store:K})}this.refreshTokenAllowedScope=L,this.extraQueryParams=D,this.extraTokenParams=F,this.extraHeaders=z})),se=function(){function e(t,r){var n=this;y(this,e),this._settings=t,this._metadataService=r,this._logger=new F("UserInfoService"),this._getClaimsFromJwt=function(){var e=v(h().mark((function e(t){var r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n._logger.create("_getClaimsFromJwt"),e.prev=1,i=J.decode(t),r.debug("JWT decoding successful"),e.abrupt("return",i);case 7:throw e.prev=7,e.t0=e.catch(1),r.error("Error parsing JWT response"),e.t0;case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),this._jsonService=new re(void 0,this._getClaimsFromJwt,this._settings.extraHeaders)}return _(e,[{key:"getClaims",value:function(){var e=v(h().mark((function e(t){var r,n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._logger.create("getClaims"),t||this._logger.throw(new Error("No token passed")),e.next=4,this._metadataService.getUserInfoEndpoint();case 4:return n=e.sent,r.debug("got userinfo url",n),e.next=8,this._jsonService.getJson(n,{token:t,credentials:this._settings.fetchRequestCredentials});case 8:return i=e.sent,r.debug("got claims",i),e.abrupt("return",i);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),oe=function(){function e(t,r){y(this,e),this._settings=t,this._metadataService=r,this._logger=new F("TokenClient"),this._jsonService=new re(this._settings.revokeTokenAdditionalContentTypes,null,this._settings.extraHeaders)}return _(e,[{key:"exchangeCode",value:function(){var e=v(h().mark((function e(t){var r,n,i,s,o,u,c,l,d,p,v,g,y,_,m,k,b,x,S;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=t.grant_type,n=void 0===r?"authorization_code":r,i=t.redirect_uri,s=void 0===i?this._settings.redirect_uri:i,o=t.client_id,u=void 0===o?this._settings.client_id:o,c=t.client_secret,l=void 0===c?this._settings.client_secret:c,d=a(t,w),p=this._logger.create("exchangeCode"),u||p.throw(new Error("A client_id is required")),s||p.throw(new Error("A redirect_uri is required")),d.code||p.throw(new Error("A code is required")),v=new URLSearchParams({grant_type:n,redirect_uri:s}),g=0,y=Object.entries(d);g<y.length;g++)_=f(y[g],2),m=_[0],null!=(k=_[1])&&v.set(m,k);e.t0=this._settings.client_authentication,e.next="client_secret_basic"===e.t0?10:"client_secret_post"===e.t0?15:18;break;case 10:if(l){e.next=13;break}throw p.throw(new Error("A client_secret is required")),null;case 13:return b=z.generateBasicAuth(u,l),e.abrupt("break",18);case 15:return v.append("client_id",u),l&&v.append("client_secret",l),e.abrupt("break",18);case 18:return e.next=20,this._metadataService.getTokenEndpoint(!1);case 20:return x=e.sent,p.debug("got token endpoint"),e.next=24,this._jsonService.postForm(x,{body:v,basicAuth:b,initCredentials:this._settings.fetchRequestCredentials});case 24:return S=e.sent,p.debug("got response"),e.abrupt("return",S);case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"exchangeCredentials",value:function(){var e=v(h().mark((function e(t){var r,n,i,s,o,u,c,l,d,p,v,g,y,_,m,k,w,x,S;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=t.grant_type,n=void 0===r?"password":r,i=t.client_id,s=void 0===i?this._settings.client_id:i,o=t.client_secret,u=void 0===o?this._settings.client_secret:o,c=t.scope,l=void 0===c?this._settings.scope:c,d=a(t,b),p=this._logger.create("exchangeCredentials"),s||p.throw(new Error("A client_id is required")),v=new URLSearchParams({grant_type:n,scope:l}),g=0,y=Object.entries(d);g<y.length;g++)_=f(y[g],2),m=_[0],null!=(k=_[1])&&v.set(m,k);e.t0=this._settings.client_authentication,e.next="client_secret_basic"===e.t0?8:"client_secret_post"===e.t0?13:16;break;case 8:if(u){e.next=11;break}throw p.throw(new Error("A client_secret is required")),null;case 11:return w=z.generateBasicAuth(s,u),e.abrupt("break",16);case 13:return v.append("client_id",s),u&&v.append("client_secret",u),e.abrupt("break",16);case 16:return e.next=18,this._metadataService.getTokenEndpoint(!1);case 18:return x=e.sent,p.debug("got token endpoint"),e.next=22,this._jsonService.postForm(x,{body:v,basicAuth:w,initCredentials:this._settings.fetchRequestCredentials});case 22:return S=e.sent,p.debug("got response"),e.abrupt("return",S);case 25:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"exchangeRefreshToken",value:function(){var e=v(h().mark((function e(t){var r,n,i,s,o,u,c,l,d,p,v,g,y,_,m,k;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.grant_type,n=void 0===r?"refresh_token":r,i=t.client_id,s=void 0===i?this._settings.client_id:i,o=t.client_secret,u=void 0===o?this._settings.client_secret:o,c=t.timeoutInSeconds,l=a(t,x),d=this._logger.create("exchangeRefreshToken"),s||d.throw(new Error("A client_id is required")),l.refresh_token||d.throw(new Error("A refresh_token is required")),p=new URLSearchParams({grant_type:n}),v=h().mark((function e(){var t,r,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=f(y[g],2),r=t[0],n=t[1],Array.isArray(n)?n.forEach((function(e){return p.append(r,e)})):null!=n&&p.set(r,n);case 2:case"end":return e.stop()}}),e)})),g=0,y=Object.entries(l);case 7:if(!(g<y.length)){e.next=12;break}return e.delegateYield(v(),"t0",9);case 9:g++,e.next=7;break;case 12:e.t1=this._settings.client_authentication,e.next="client_secret_basic"===e.t1?15:"client_secret_post"===e.t1?20:23;break;case 15:if(u){e.next=18;break}throw d.throw(new Error("A client_secret is required")),null;case 18:return _=z.generateBasicAuth(s,u),e.abrupt("break",23);case 20:return p.append("client_id",s),u&&p.append("client_secret",u),e.abrupt("break",23);case 23:return e.next=25,this._metadataService.getTokenEndpoint(!1);case 25:return m=e.sent,d.debug("got token endpoint"),e.next=29,this._jsonService.postForm(m,{body:p,basicAuth:_,timeoutInSeconds:c,initCredentials:this._settings.fetchRequestCredentials});case 29:return k=e.sent,d.debug("got response"),e.abrupt("return",k);case 32:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"revoke",value:function(){var e=v(h().mark((function e(t){var r,n,i,a,s,o,u,c,l;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._logger.create("revoke"),t.token||n.throw(new Error("A token is required")),e.next=4,this._metadataService.getRevocationEndpoint(!1);case 4:for(i=e.sent,n.debug("got revocation endpoint, revoking ".concat(null!=(r=t.token_type_hint)?r:"default token type")),a=new URLSearchParams,s=0,o=Object.entries(t);s<o.length;s++)u=f(o[s],2),c=u[0],null!=(l=u[1])&&a.set(c,l);return a.set("client_id",this._settings.client_id),this._settings.client_secret&&a.set("client_secret",this._settings.client_secret),e.next=12,this._jsonService.postForm(i,{body:a});case 12:n.debug("got response");case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),ue=function(){function e(t,r,n){y(this,e),this._settings=t,this._metadataService=r,this._claimsService=n,this._logger=new F("ResponseValidator"),this._userInfoService=new se(this._settings,this._metadataService),this._tokenClient=new oe(this._settings,this._metadataService)}return _(e,[{key:"validateSigninResponse",value:function(){var e=v(h().mark((function e(t,r){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._logger.create("validateSigninResponse"),this._processSigninState(t,r),n.debug("state processed"),e.next=5,this._processCode(t,r);case 5:return n.debug("code processed"),t.isOpenId&&this._validateIdTokenAttributes(t),n.debug("tokens validated"),e.next=10,this._processClaims(t,null==r?void 0:r.skipUserInfo,t.isOpenId);case 10:n.debug("claims processed");case 11:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"validateCredentialsResponse",value:function(){var e=v(h().mark((function e(t,r){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._logger.create("validateCredentialsResponse"),t.isOpenId&&t.id_token&&this._validateIdTokenAttributes(t),n.debug("tokens validated"),e.next=5,this._processClaims(t,r,t.isOpenId);case 5:n.debug("claims processed");case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"validateRefreshResponse",value:function(){var e=v(h().mark((function e(t,r){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._logger.create("validateRefreshResponse"),t.userState=r.data,null!=t.session_state||(t.session_state=r.session_state),null!=t.scope||(t.scope=r.scope),t.isOpenId&&t.id_token&&(this._validateIdTokenAttributes(t,r.id_token),n.debug("ID Token validated")),t.id_token||(t.id_token=r.id_token,t.profile=r.profile),i=t.isOpenId&&!!t.id_token,e.next=9,this._processClaims(t,!1,i);case 9:n.debug("claims processed");case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"validateSignoutResponse",value:function(e,t){var r=this._logger.create("validateSignoutResponse");if(t.id!==e.state&&r.throw(new Error("State does not match")),r.debug("state validated"),e.userState=t.data,e.error)throw r.warn("Response was error",e.error),new G(e)}},{key:"_processSigninState",value:function(e,t){var r=this._logger.create("_processSigninState");if(t.id!==e.state&&r.throw(new Error("State does not match")),t.client_id||r.throw(new Error("No client_id on state")),t.authority||r.throw(new Error("No authority on state")),this._settings.authority!==t.authority&&r.throw(new Error("authority mismatch on settings vs. signin state")),this._settings.client_id&&this._settings.client_id!==t.client_id&&r.throw(new Error("client_id mismatch on settings vs. signin state")),r.debug("state validated"),e.userState=t.data,e.url_state=t.url_state,null!=e.scope||(e.scope=t.scope),e.error)throw r.warn("Response was error",e.error),new G(e);t.code_verifier&&!e.code&&r.throw(new Error("Expected code in response"))}},{key:"_processClaims",value:function(){var e=v(h().mark((function e(t){var r,n,i,a,s=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>1&&void 0!==s[1]&&s[1],n=!(s.length>2&&void 0!==s[2])||s[2],i=this._logger.create("_processClaims"),t.profile=this._claimsService.filterProtocolClaims(t.profile),!r&&this._settings.loadUserInfo&&t.access_token){e.next=7;break}return i.debug("not loading user info"),e.abrupt("return");case 7:return i.debug("loading user info"),e.next=10,this._userInfoService.getClaims(t.access_token);case 10:a=e.sent,i.debug("user info claims received from user info endpoint"),n&&a.sub!==t.profile.sub&&i.throw(new Error("subject from UserInfo response does not match subject in ID Token")),t.profile=this._claimsService.mergeClaims(t.profile,this._claimsService.filterProtocolClaims(a)),i.debug("user info claims received, updated profile:",t.profile);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_processCode",value:function(){var e=v(h().mark((function e(t,r){var n,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._logger.create("_processCode"),!t.code){e.next=9;break}return n.debug("Validating code"),e.next=5,this._tokenClient.exchangeCode(i({client_id:r.client_id,client_secret:r.client_secret,code:t.code,redirect_uri:r.redirect_uri,code_verifier:r.code_verifier},r.extraTokenParams));case 5:a=e.sent,Object.assign(t,a),e.next=10;break;case 9:n.debug("No code to process");case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_validateIdTokenAttributes",value:function(e,t){var r,n=this._logger.create("_validateIdTokenAttributes");n.debug("decoding ID Token JWT");var i=J.decode(null!=(r=e.id_token)?r:"");if(i.sub||n.throw(new Error("ID Token is missing a subject claim")),t){var a=J.decode(t);i.sub!==a.sub&&n.throw(new Error("sub in id_token does not match current sub")),i.auth_time&&i.auth_time!==a.auth_time&&n.throw(new Error("auth_time in id_token does not match original auth_time")),i.azp&&i.azp!==a.azp&&n.throw(new Error("azp in id_token does not match original azp")),!i.azp&&a.azp&&n.throw(new Error("azp not in id_token, but present in original id_token"))}e.profile=i}}]),e}(),ce=function(){function e(t){y(this,e),this.id=t.id||z.generateUUIDv4(),this.data=t.data,t.created&&t.created>0?this.created=t.created:this.created=Q.getEpochTime(),this.request_type=t.request_type,this.url_state=t.url_state}return _(e,[{key:"toStorageString",value:function(){return new F("State").create("toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,url_state:this.url_state})}}],[{key:"fromStorageString",value:function(t){return F.createStatic("State","fromStorageString"),Promise.resolve(new e(JSON.parse(t)))}},{key:"clearStaleState",value:function(){var t=v(h().mark((function t(r,n){var i,a,s,o,u,c,l,d;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=F.createStatic("State","clearStaleState"),a=Q.getEpochTime()-n,t.next=4,r.getAllKeys();case 4:s=t.sent,i.debug("got keys",s),o=0;case 7:if(!(o<s.length)){t.next=34;break}return u=s[o],t.next=11,r.get(u);case 11:if(c=t.sent,l=!1,!c){t.next=28;break}return t.prev=14,t.next=17,e.fromStorageString(c);case 17:d=t.sent,i.debug("got item from key:",u,d.created),d.created<=a&&(l=!0),t.next=26;break;case 22:t.prev=22,t.t0=t.catch(14),i.error("Error parsing state for key:",u,t.t0),l=!0;case 26:t.next=30;break;case 28:i.debug("no item in storage for key:",u),l=!0;case 30:l&&(i.debug("removed item for key:",u),r.remove(u));case 31:o++,t.next=7;break;case 34:case"end":return t.stop()}}),t,null,[[14,22]])})));return function(e,r){return t.apply(this,arguments)}}()}]),e}(),le=function(e){u(r,e);var t=c(r);function r(e){var n;return y(this,r),(n=t.call(this,e)).code_verifier=e.code_verifier,n.code_challenge=e.code_challenge,n.authority=e.authority,n.client_id=e.client_id,n.redirect_uri=e.redirect_uri,n.scope=e.scope,n.client_secret=e.client_secret,n.extraTokenParams=e.extraTokenParams,n.response_mode=e.response_mode,n.skipUserInfo=e.skipUserInfo,n}return _(r,[{key:"toStorageString",value:function(){return new F("SigninState").create("toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,url_state:this.url_state,code_verifier:this.code_verifier,authority:this.authority,client_id:this.client_id,redirect_uri:this.redirect_uri,scope:this.scope,client_secret:this.client_secret,extraTokenParams:this.extraTokenParams,response_mode:this.response_mode,skipUserInfo:this.skipUserInfo})}}],[{key:"create",value:function(){var e=v(h().mark((function e(t){var n,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=!0===t.code_verifier?z.generateCodeVerifier():t.code_verifier||void 0)){e.next=7;break}return e.next=4,z.generateCodeChallenge(n);case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=void 0;case 8:return a=e.t0,e.abrupt("return",new r(i(i({},t),{},{code_verifier:n,code_challenge:a})));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"fromStorageString",value:function(e){F.createStatic("SigninState","fromStorageString");var t=JSON.parse(e);return r.create(t)}}]),r}(ce),de=function(){function e(t){y(this,e),this.url=t.url,this.state=t.state}return _(e,null,[{key:"create",value:function(){var t=v(h().mark((function t(r){var n,s,o,u,c,l,d,p,v,g,y,_,m,k,w,b,x,T,Z,O,E,P,I,j,R,C;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.url,s=r.authority,o=r.client_id,u=r.redirect_uri,c=r.response_type,l=r.scope,d=r.state_data,p=r.response_mode,v=r.request_type,g=r.client_secret,y=r.nonce,_=r.url_state,m=r.resource,k=r.skipUserInfo,w=r.extraQueryParams,b=r.extraTokenParams,x=r.disablePKCE,T=a(r,S),n){t.next=4;break}throw this._logger.error("create: No url passed"),new Error("url");case 4:if(o){t.next=7;break}throw this._logger.error("create: No client_id passed"),new Error("client_id");case 7:if(u){t.next=10;break}throw this._logger.error("create: No redirect_uri passed"),new Error("redirect_uri");case 10:if(c){t.next=13;break}throw this._logger.error("create: No response_type passed"),new Error("response_type");case 13:if(l){t.next=16;break}throw this._logger.error("create: No scope passed"),new Error("scope");case 16:if(s){t.next=19;break}throw this._logger.error("create: No authority passed"),new Error("authority");case 19:return t.next=21,le.create({data:d,request_type:v,url_state:_,code_verifier:!x,client_id:o,authority:s,redirect_uri:u,response_mode:p,client_secret:g,scope:l,extraTokenParams:b,skipUserInfo:k});case 21:for(Z=t.sent,(O=new URL(n)).searchParams.append("client_id",o),O.searchParams.append("redirect_uri",u),O.searchParams.append("response_type",c),O.searchParams.append("scope",l),y&&O.searchParams.append("nonce",y),E=Z.id,_&&(E="".concat(E).concat(";").concat(_)),O.searchParams.append("state",E),Z.code_challenge&&(O.searchParams.append("code_challenge",Z.code_challenge),O.searchParams.append("code_challenge_method","S256")),m&&(Array.isArray(m)?m:[m]).forEach((function(e){return O.searchParams.append("resource",e)})),P=0,I=Object.entries(i(i({response_mode:p},T),w));P<I.length;P++)j=f(I[P],2),R=j[0],null!=(C=j[1])&&O.searchParams.append(R,C.toString());return t.abrupt("return",new e({url:O.href,state:Z}));case 35:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),e}();de._logger=new F("SigninRequest");var fe=de,pe=function(){function e(t){if(y(this,e),this.access_token="",this.token_type="",this.profile={},this.state=t.get("state"),this.session_state=t.get("session_state"),this.state){var r=decodeURIComponent(this.state).split(";");this.state=r[0],r.length>1&&(this.url_state=r.slice(1).join(";"))}this.error=t.get("error"),this.error_description=t.get("error_description"),this.error_uri=t.get("error_uri"),this.code=t.get("code")}return _(e,[{key:"expires_in",get:function(){if(void 0!==this.expires_at)return this.expires_at-Q.getEpochTime()},set:function(e){"string"===typeof e&&(e=Number(e)),void 0!==e&&e>=0&&(this.expires_at=Math.floor(e)+Q.getEpochTime())}},{key:"isOpenId",get:function(){var e;return(null==(e=this.scope)?void 0:e.split(" ").includes("openid"))||!!this.id_token}}]),e}(),he=_((function e(t){var r=t.url,n=t.state_data,a=t.id_token_hint,s=t.post_logout_redirect_uri,o=t.extraQueryParams,u=t.request_type,c=t.client_id;if(y(this,e),this._logger=new F("SignoutRequest"),!r)throw this._logger.error("ctor: No url passed"),new Error("url");var l=new URL(r);a&&l.searchParams.append("id_token_hint",a),c&&l.searchParams.append("client_id",c),s&&(l.searchParams.append("post_logout_redirect_uri",s),n&&(this.state=new ce({data:n,request_type:u}),l.searchParams.append("state",this.state.id)));for(var d=0,p=Object.entries(i({},o));d<p.length;d++){var h=f(p[d],2),v=h[0],g=h[1];null!=g&&l.searchParams.append(v,g.toString())}this.url=l.href})),ve=_((function e(t){y(this,e),this.state=t.get("state"),this.error=t.get("error"),this.error_description=t.get("error_description"),this.error_uri=t.get("error_uri")})),ge=["nbf","jti","auth_time","nonce","acr","amr","azp","at_hash"],ye=["sub","iss","aud","exp","iat"],_e=function(){function e(t){y(this,e),this._settings=t,this._logger=new F("ClaimsService")}return _(e,[{key:"filterProtocolClaims",value:function(e){var t=i({},e);if(this._settings.filterProtocolClaims){var r;r=Array.isArray(this._settings.filterProtocolClaims)?this._settings.filterProtocolClaims:ge;var n,a=m(r);try{for(a.s();!(n=a.n()).done;){var s=n.value;ye.includes(s)||delete t[s]}}catch(o){a.e(o)}finally{a.f()}}return t}},{key:"mergeClaims",value:function(e,t){for(var r=i({},e),n=0,a=Object.entries(t);n<a.length;n++){var s=f(a[n],2),o=s[0],u=s[1];if(r[o]!==u)if(Array.isArray(r[o])||Array.isArray(u))if("replace"==this._settings.mergeClaimsStrategy.array)r[o]=u;else{var c,l=Array.isArray(r[o])?r[o]:[r[o]],d=m(Array.isArray(u)?u:[u]);try{for(d.s();!(c=d.n()).done;){var p=c.value;l.includes(p)||l.push(p)}}catch(h){d.e(h)}finally{d.f()}r[o]=l}else"object"===typeof r[o]&&"object"===typeof u?r[o]=this.mergeClaims(r[o],u):r[o]=u}return r}}]),e}(),me=function(){function e(t,r){y(this,e),this._logger=new F("OidcClient"),this.settings=t instanceof ae?t:new ae(t),this.metadataService=null!=r?r:new ne(this.settings),this._claimsService=new _e(this.settings),this._validator=new ue(this.settings,this.metadataService,this._claimsService),this._tokenClient=new oe(this.settings,this.metadataService)}return _(e,[{key:"createSigninRequest",value:function(){var e=v(h().mark((function e(t){var r,n,i,a,s,o,u,c,l,d,f,p,v,g,y,_,m,k,w,b,x,S,T,Z,O,E,P,I,j,R,C,U,N,M,A,L,q;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.state,n=t.request,i=t.request_uri,a=t.request_type,s=t.id_token_hint,o=t.login_hint,u=t.skipUserInfo,c=t.nonce,l=t.url_state,d=t.response_type,f=void 0===d?this.settings.response_type:d,p=t.scope,v=void 0===p?this.settings.scope:p,g=t.redirect_uri,y=void 0===g?this.settings.redirect_uri:g,_=t.prompt,m=void 0===_?this.settings.prompt:_,k=t.display,w=void 0===k?this.settings.display:k,b=t.max_age,x=void 0===b?this.settings.max_age:b,S=t.ui_locales,T=void 0===S?this.settings.ui_locales:S,Z=t.acr_values,O=void 0===Z?this.settings.acr_values:Z,E=t.resource,P=void 0===E?this.settings.resource:E,I=t.response_mode,j=void 0===I?this.settings.response_mode:I,R=t.extraQueryParams,C=void 0===R?this.settings.extraQueryParams:R,U=t.extraTokenParams,N=void 0===U?this.settings.extraTokenParams:U,M=this._logger.create("createSigninRequest"),"code"===f){e.next=4;break}throw new Error("Only the Authorization Code flow (with PKCE) is supported");case 4:return e.next=6,this.metadataService.getAuthorizationEndpoint();case 6:return A=e.sent,M.debug("Received authorization endpoint",A),e.next=10,fe.create({url:A,authority:this.settings.authority,client_id:this.settings.client_id,redirect_uri:y,response_type:f,scope:v,state_data:r,url_state:l,prompt:m,display:w,max_age:x,ui_locales:T,id_token_hint:s,login_hint:o,acr_values:O,resource:P,request:n,request_uri:i,extraQueryParams:C,extraTokenParams:N,request_type:a,response_mode:j,client_secret:this.settings.client_secret,skipUserInfo:u,nonce:c,disablePKCE:this.settings.disablePKCE});case 10:return L=e.sent,e.next=13,this.clearStaleState();case 13:return q=L.state,e.next=16,this.settings.stateStore.set(q.id,q.toStorageString());case 16:return e.abrupt("return",L);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readSigninResponseState",value:function(){var e=v(h().mark((function e(t){var r,n,i,a,s,o=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o.length>1&&void 0!==o[1]&&o[1],n=this._logger.create("readSigninResponseState"),(i=new pe($.readParams(t,this.settings.response_mode))).state){e.next=6;break}throw n.throw(new Error("No state in response")),null;case 6:return e.next=8,this.settings.stateStore[r?"remove":"get"](i.state);case 8:if(a=e.sent){e.next=12;break}throw n.throw(new Error("No matching state found in storage")),null;case 12:return e.next=14,le.fromStorageString(a);case 14:return s=e.sent,e.abrupt("return",{state:s,response:i});case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"processSigninResponse",value:function(){var e=v(h().mark((function e(t){var r,n,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._logger.create("processSigninResponse"),e.next=3,this.readSigninResponseState(t,!0);case 3:return n=e.sent,i=n.state,a=n.response,r.debug("received state from storage; validating response"),e.next=9,this._validator.validateSigninResponse(a,i);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"processResourceOwnerPasswordCredentials",value:function(){var e=v(h().mark((function e(t){var r,n,a,s,o,u,c,l;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.username,n=t.password,a=t.skipUserInfo,s=void 0!==a&&a,o=t.extraTokenParams,u=void 0===o?{}:o,e.next=3,this._tokenClient.exchangeCredentials(i({username:r,password:n},u));case 3:return c=e.sent,l=new pe(new URLSearchParams),Object.assign(l,c),e.next=8,this._validator.validateCredentialsResponse(l,s);case 8:return e.abrupt("return",l);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"useRefreshToken",value:function(){var e=v(h().mark((function e(t){var r,n,a,s,o,u,c,l,d,f,p,v;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.state,n=t.redirect_uri,a=t.resource,s=t.timeoutInSeconds,o=t.extraTokenParams,c=this._logger.create("useRefreshToken"),void 0===this.settings.refreshTokenAllowedScope?l=r.scope:(d=this.settings.refreshTokenAllowedScope.split(" "),f=(null==(u=r.scope)?void 0:u.split(" "))||[],l=f.filter((function(e){return d.includes(e)})).join(" ")),e.next=5,this._tokenClient.exchangeRefreshToken(i({refresh_token:r.refresh_token,scope:l,redirect_uri:n,resource:a,timeoutInSeconds:s},o));case 5:return p=e.sent,v=new pe(new URLSearchParams),Object.assign(v,p),c.debug("validating response",v),e.next=11,this._validator.validateRefreshResponse(v,i(i({},r),{},{scope:l}));case 11:return e.abrupt("return",v);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSignoutRequest",value:function(){var e=v(h().mark((function e(){var t,r,n,i,a,s,o,u,c,l,d,f,p,v=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(t=v.length>0&&void 0!==v[0]?v[0]:{}).state,n=t.id_token_hint,i=t.client_id,a=t.request_type,s=t.post_logout_redirect_uri,o=void 0===s?this.settings.post_logout_redirect_uri:s,u=t.extraQueryParams,c=void 0===u?this.settings.extraQueryParams:u,l=this._logger.create("createSignoutRequest"),e.next=4,this.metadataService.getEndSessionEndpoint();case 4:if(d=e.sent){e.next=8;break}throw l.throw(new Error("No end session endpoint")),null;case 8:return l.debug("Received end session endpoint",d),i||!o||n||(i=this.settings.client_id),f=new he({url:d,id_token_hint:n,client_id:i,post_logout_redirect_uri:o,state_data:r,extraQueryParams:c,request_type:a}),e.next=13,this.clearStaleState();case 13:if(!(p=f.state)){e.next=18;break}return l.debug("Signout request has state to persist"),e.next=18,this.settings.stateStore.set(p.id,p.toStorageString());case 18:return e.abrupt("return",f);case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readSignoutResponseState",value:function(){var e=v(h().mark((function e(t){var r,n,i,a,s,o=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o.length>1&&void 0!==o[1]&&o[1],n=this._logger.create("readSignoutResponseState"),(i=new ve($.readParams(t,this.settings.response_mode))).state){e.next=9;break}if(n.debug("No state in response"),!i.error){e.next=8;break}throw n.warn("Response was error:",i.error),new G(i);case 8:return e.abrupt("return",{state:void 0,response:i});case 9:return e.next=11,this.settings.stateStore[r?"remove":"get"](i.state);case 11:if(a=e.sent){e.next=15;break}throw n.throw(new Error("No matching state found in storage")),null;case 15:return e.next=17,ce.fromStorageString(a);case 17:return s=e.sent,e.abrupt("return",{state:s,response:i});case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"processSignoutResponse",value:function(){var e=v(h().mark((function e(t){var r,n,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._logger.create("processSignoutResponse"),e.next=3,this.readSignoutResponseState(t,!0);case 3:return n=e.sent,i=n.state,a=n.response,i?(r.debug("Received state from storage; validating response"),this._validator.validateSignoutResponse(a,i)):r.debug("No state from storage; skipping response validation"),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearStaleState",value:function(){return this._logger.create("clearStaleState"),ce.clearStaleState(this.settings.stateStore,this.settings.staleStateAgeInSeconds)}},{key:"revokeToken",value:function(){var e=v(h().mark((function e(t,r){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._logger.create("revokeToken"),e.next=3,this._tokenClient.revoke({token:t,token_type_hint:r});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),ke=function(){function e(t){var r=this;y(this,e),this._userManager=t,this._logger=new F("SessionMonitor"),this._start=function(){var e=v(h().mark((function e(t){var n,i,a,s,o,u,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.session_state){e.next=3;break}return e.abrupt("return");case 3:if(i=r._logger.create("_start"),t.profile?(r._sub=t.profile.sub,i.debug("session_state",n,", sub",r._sub)):(r._sub=void 0,i.debug("session_state",n,", anonymous user")),!r._checkSessionIFrame){e.next=8;break}return r._checkSessionIFrame.start(n),e.abrupt("return");case 8:return e.prev=8,e.next=11,r._userManager.metadataService.getCheckSessionIframe();case 11:if(!(a=e.sent)){e.next=24;break}return i.debug("initializing check session iframe"),s=r._userManager.settings.client_id,o=r._userManager.settings.checkSessionIntervalInSeconds,u=r._userManager.settings.stopCheckSessionOnError,c=new ee(r._callback,s,a,o,u),e.next=20,c.load();case 20:r._checkSessionIFrame=c,c.start(n),e.next=25;break;case 24:i.warn("no check session iframe found in the metadata");case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(8),i.error("Error from getCheckSessionIframe:",e.t0 instanceof Error?e.t0.message:e.t0);case 30:case"end":return e.stop()}}),e,null,[[8,27]])})));return function(t){return e.apply(this,arguments)}}(),this._stop=function(){var e=r._logger.create("_stop");if(r._sub=void 0,r._checkSessionIFrame&&r._checkSessionIFrame.stop(),r._userManager.settings.monitorAnonymousSession)var t=setInterval(v(h().mark((function n(){var i,a;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearInterval(t),n.prev=1,n.next=4,r._userManager.querySessionStatus();case 4:(i=n.sent)&&(a={session_state:i.session_state,profile:i.sub?{sub:i.sub}:null},r._start(a)),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),e.error("error from querySessionStatus",n.t0 instanceof Error?n.t0.message:n.t0);case 11:case"end":return n.stop()}}),n,null,[[1,8]])}))),1e3)},this._callback=v(h().mark((function e(){var t,n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r._logger.create("_callback"),e.prev=1,e.next=4,r._userManager.querySessionStatus();case 4:if(n=e.sent,i=!0,!n||!r._checkSessionIFrame){e.next=18;break}if(n.sub!==r._sub){e.next=15;break}return i=!1,r._checkSessionIFrame.start(n.session_state),t.debug("same sub still logged in at OP, session state has changed, restarting check session iframe; session_state",n.session_state),e.next=13,r._userManager.events._raiseUserSessionChanged();case 13:e.next=16;break;case 15:t.debug("different subject signed into OP",n.sub);case 16:e.next=19;break;case 18:t.debug("subject no longer signed into OP");case 19:if(!i){e.next=29;break}if(!r._sub){e.next=25;break}return e.next=23,r._userManager.events._raiseUserSignedOut();case 23:e.next=27;break;case 25:return e.next=27,r._userManager.events._raiseUserSignedIn();case 27:e.next=30;break;case 29:t.debug("no change in session detected, no event to raise");case 30:e.next=38;break;case 32:if(e.prev=32,e.t0=e.catch(1),!r._sub){e.next=38;break}return t.debug("Error calling queryCurrentSigninSession; raising signed out event",e.t0),e.next=38,r._userManager.events._raiseUserSignedOut();case 38:case"end":return e.stop()}}),e,null,[[1,32]])}))),t||this._logger.throw(new Error("No user manager passed")),this._userManager.events.addUserLoaded(this._start),this._userManager.events.addUserUnloaded(this._stop),this._init().catch((function(e){r._logger.error(e)}))}return _(e,[{key:"_init",value:function(){var e=v(h().mark((function e(){var t,r,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._logger.create("_init"),e.next=3,this._userManager.getUser();case 3:if(!(t=e.sent)){e.next=8;break}this._start(t),e.next=13;break;case 8:if(!this._userManager.settings.monitorAnonymousSession){e.next=13;break}return e.next=11,this._userManager.querySessionStatus();case 11:(r=e.sent)&&(n={session_state:r.session_state,profile:r.sub?{sub:r.sub}:null},this._start(n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),we=function(){function e(t){var r;y(this,e),this.id_token=t.id_token,this.session_state=null!=(r=t.session_state)?r:null,this.access_token=t.access_token,this.refresh_token=t.refresh_token,this.token_type=t.token_type,this.scope=t.scope,this.profile=t.profile,this.expires_at=t.expires_at,this.state=t.userState,this.url_state=t.url_state}return _(e,[{key:"expires_in",get:function(){if(void 0!==this.expires_at)return this.expires_at-Q.getEpochTime()},set:function(e){void 0!==e&&(this.expires_at=Math.floor(e)+Q.getEpochTime())}},{key:"expired",get:function(){var e=this.expires_in;if(void 0!==e)return e<=0}},{key:"scopes",get:function(){var e,t;return null!=(t=null==(e=this.scope)?void 0:e.split(" "))?t:[]}},{key:"toStorageString",value:function(){return new F("User").create("toStorageString"),JSON.stringify({id_token:this.id_token,session_state:this.session_state,access_token:this.access_token,refresh_token:this.refresh_token,token_type:this.token_type,scope:this.scope,profile:this.profile,expires_at:this.expires_at})}}],[{key:"fromStorageString",value:function(t){return F.createStatic("User","fromStorageString"),new e(JSON.parse(t))}}]),e}(),be="oidc-client",xe=function(){function e(){y(this,e),this._abort=new K("Window navigation aborted"),this._disposeHandlers=new Set,this._window=null}return _(e,[{key:"navigate",value:function(){var e=v(h().mark((function e(t){var r,n,i,a,s=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this._logger.create("navigate"),this._window){e.next=3;break}throw new Error("Attempted to navigate on a disposed window");case 3:return r.debug("setting URL in window"),this._window.location.replace(t.url),e.next=7,new Promise((function(e,n){var i=function(i){var a,o=i.data,u=null!=(a=t.scriptOrigin)?a:window.location.origin;if(i.origin===u&&(null==o?void 0:o.source)===be){try{var c=$.readParams(o.url,t.response_mode).get("state");if(c||r.warn("no state found in response url"),i.source!==s._window&&c!==t.state)return}catch(l){s._dispose(),n(new Error("Invalid response from window"))}e(o)}};window.addEventListener("message",i,!1),s._disposeHandlers.add((function(){return window.removeEventListener("message",i,!1)})),s._disposeHandlers.add(s._abort.addHandler((function(e){s._dispose(),n(e)})))}));case 7:return n=e.sent,i=n.url,a=n.keepOpen,r.debug("got response from window"),this._dispose(),a||this.close(),e.abrupt("return",{url:i});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_dispose",value:function(){this._logger.create("_dispose");var e,t=m(this._disposeHandlers);try{for(t.s();!(e=t.n()).done;){(0,e.value)()}}catch(r){t.e(r)}finally{t.f()}this._disposeHandlers.clear()}}],[{key:"_notifyParent",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window.location.origin;e.postMessage({source:be,url:t,keepOpen:r},n)}}]),e}(),Se={location:!1,toolbar:!1,height:640,closePopupWindowAfterInSeconds:-1},Te="_blank",Ze=function(e){u(r,e);var t=c(r);function r(e){var n;y(this,r);var i=e.popup_redirect_uri,a=void 0===i?e.redirect_uri:i,s=e.popup_post_logout_redirect_uri,o=void 0===s?e.post_logout_redirect_uri:s,u=e.popupWindowFeatures,c=void 0===u?Se:u,l=e.popupWindowTarget,d=void 0===l?Te:l,f=e.redirectMethod,p=void 0===f?"assign":f,h=e.redirectTarget,v=void 0===h?"self":h,g=e.iframeNotifyParentOrigin,_=void 0===g?e.iframeNotifyParentOrigin:g,m=e.iframeScriptOrigin,k=void 0===m?e.iframeScriptOrigin:m,w=e.silent_redirect_uri,b=void 0===w?e.redirect_uri:w,x=e.silentRequestTimeoutInSeconds,S=void 0===x?10:x,T=e.automaticSilentRenew,Z=void 0===T||T,O=e.validateSubOnSilentRenew,E=void 0===O||O,P=e.includeIdTokenInSilentRenew,I=void 0!==P&&P,j=e.monitorSession,R=void 0!==j&&j,C=e.monitorAnonymousSession,U=void 0!==C&&C,N=e.checkSessionIntervalInSeconds,M=void 0===N?2:N,A=e.query_status_response_type,L=void 0===A?"code":A,q=e.stopCheckSessionOnError,D=void 0===q||q,W=e.revokeTokenTypes,F=void 0===W?["access_token","refresh_token"]:W,H=e.revokeTokensOnSignout,z=void 0!==H&&H,K=e.includeIdTokenInSilentSignout,V=void 0!==K&&K,J=e.accessTokenExpiringNotificationTimeInSeconds,B=void 0===J?60:J,Q=e.userStore;if((n=t.call(this,e)).popup_redirect_uri=a,n.popup_post_logout_redirect_uri=o,n.popupWindowFeatures=c,n.popupWindowTarget=d,n.redirectMethod=p,n.redirectTarget=v,n.iframeNotifyParentOrigin=_,n.iframeScriptOrigin=k,n.silent_redirect_uri=b,n.silentRequestTimeoutInSeconds=S,n.automaticSilentRenew=Z,n.validateSubOnSilentRenew=E,n.includeIdTokenInSilentRenew=I,n.monitorSession=R,n.monitorAnonymousSession=U,n.checkSessionIntervalInSeconds=M,n.stopCheckSessionOnError=D,n.query_status_response_type=L,n.revokeTokenTypes=F,n.revokeTokensOnSignout=z,n.includeIdTokenInSilentSignout=V,n.accessTokenExpiringNotificationTimeInSeconds=B,Q)n.userStore=Q;else{var $="undefined"!==typeof window?window.sessionStorage:new te;n.userStore=new ie({store:$})}return n}return _(r)}(ae),Oe=function(e){u(r,e);var t=c(r);function r(e){var n,i=e.silentRequestTimeoutInSeconds,a=void 0===i?10:i;return y(this,r),(n=t.call(this))._logger=new F("IFrameWindow"),n._timeoutInSeconds=a,n._frame=r.createHiddenIframe(),n._window=n._frame.contentWindow,n}return _(r,[{key:"navigate",value:function(){var e=v(h().mark((function e(t){var n,i=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._logger.debug("navigate: Using timeout of:",this._timeoutInSeconds),n=setTimeout((function(){i._abort.raise(new Y("IFrame timed out without a response"))}),1e3*this._timeoutInSeconds),this._disposeHandlers.add((function(){return clearTimeout(n)})),e.next=5,l(d(r.prototype),"navigate",this).call(this,t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"close",value:function(){var e,t=this;this._frame&&(this._frame.parentNode&&(this._frame.addEventListener("load",(function(e){var r,n=e.target;null==(r=n.parentNode)||r.removeChild(n),t._abort.raise(new Error("IFrame removed from DOM"))}),!0),null==(e=this._frame.contentWindow)||e.location.replace("about:blank")),this._frame=null),this._window=null}}],[{key:"createHiddenIframe",value:function(){var e=window.document.createElement("iframe");return e.style.visibility="hidden",e.style.position="fixed",e.style.left="-1000px",e.style.top="0",e.width="0",e.height="0",window.document.body.appendChild(e),e}},{key:"notifyParent",value:function(e,t){return l(d(r),"_notifyParent",this).call(this,window.parent,e,!1,t)}}]),r}(xe),Ee=function(){function e(t){y(this,e),this._settings=t,this._logger=new F("IFrameNavigator")}return _(e,[{key:"prepare",value:function(){var e=v(h().mark((function e(t){var r,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.silentRequestTimeoutInSeconds,n=void 0===r?this._settings.silentRequestTimeoutInSeconds:r,e.abrupt("return",new Oe({silentRequestTimeoutInSeconds:n}));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"callback",value:function(){var e=v(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._logger.create("callback"),Oe.notifyParent(t,this._settings.iframeNotifyParentOrigin);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Pe=function(e){u(r,e);var t=c(r);function r(e){var n,a=e.popupWindowTarget,s=void 0===a?Te:a,o=e.popupWindowFeatures,u=void 0===o?{}:o;y(this,r),(n=t.call(this))._logger=new F("PopupWindow");var c=B.center(i(i({},Se),u));return n._window=window.open(void 0,s,B.serialize(c)),u.closePopupWindowAfterInSeconds&&u.closePopupWindowAfterInSeconds>0&&setTimeout((function(){n._window&&"boolean"===typeof n._window.closed&&!n._window.closed?n.close():n._abort.raise(new Error("Popup blocked by user"))}),1e3*u.closePopupWindowAfterInSeconds),n}return _(r,[{key:"navigate",value:function(){var e=v(h().mark((function e(t){var n,i,a=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==(n=this._window)||n.focus(),i=setInterval((function(){a._window&&!a._window.closed||a._abort.raise(new Error("Popup closed by user"))}),500),this._disposeHandlers.add((function(){return clearInterval(i)})),e.next=5,l(d(r.prototype),"navigate",this).call(this,t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"close",value:function(){this._window&&(this._window.closed||(this._window.close(),this._abort.raise(new Error("Popup closed")))),this._window=null}}],[{key:"notifyOpener",value:function(e,t){if(!window.opener)throw new Error("No window.opener. Can't complete notification.");return l(d(r),"_notifyParent",this).call(this,window.opener,e,t)}}]),r}(xe),Ie=function(){function e(t){y(this,e),this._settings=t,this._logger=new F("PopupNavigator")}return _(e,[{key:"prepare",value:function(){var e=v(h().mark((function e(t){var r,n,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.popupWindowFeatures,n=void 0===r?this._settings.popupWindowFeatures:r,i=t.popupWindowTarget,a=void 0===i?this._settings.popupWindowTarget:i,e.abrupt("return",new Pe({popupWindowFeatures:n,popupWindowTarget:a}));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"callback",value:function(){var e=v(h().mark((function e(t,r){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r.keepOpen,i=void 0!==n&&n,this._logger.create("callback"),Pe.notifyOpener(t,i);case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),je=function(){function e(t){y(this,e),this._settings=t,this._logger=new F("RedirectNavigator")}return _(e,[{key:"prepare",value:function(){var e=v(h().mark((function e(t){var r,n,i,a,s,o,u,c,l=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.redirectMethod,n=void 0===r?this._settings.redirectMethod:r,i=t.redirectTarget,a=void 0===i?this._settings.redirectTarget:i,this._logger.create("prepare"),o=window.self,"top"===a&&(o=null!=(s=window.top)?s:window.self),u=o.location[n].bind(o.location),e.abrupt("return",{navigate:function(){var e=v(h().mark((function e(t){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l._logger.create("navigate"),r=new Promise((function(e,t){c=t})),u(t.url),e.next=5,r;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),close:function(){l._logger.create("close"),null==c||c(new Error("Redirect aborted")),o.stop()}});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"callback",value:function(){var e=v(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Re=function(e){u(r,e);var t=c(r);function r(e){var n;return y(this,r),(n=t.call(this,{expiringNotificationTimeInSeconds:e.accessTokenExpiringNotificationTimeInSeconds}))._logger=new F("UserManagerEvents"),n._userLoaded=new K("User loaded"),n._userUnloaded=new K("User unloaded"),n._silentRenewError=new K("Silent renew error"),n._userSignedIn=new K("User signed in"),n._userSignedOut=new K("User signed out"),n._userSessionChanged=new K("User session changed"),n}return _(r,[{key:"load",value:function(){var e=v(h().mark((function e(t){var n,i=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!(i.length>1&&void 0!==i[1])||i[1],l(d(r.prototype),"load",this).call(this,t),!n){e.next=5;break}return e.next=5,this._userLoaded.raise(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"unload",value:function(){var e=v(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(d(r.prototype),"unload",this).call(this),e.next=3,this._userUnloaded.raise();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addUserLoaded",value:function(e){return this._userLoaded.addHandler(e)}},{key:"removeUserLoaded",value:function(e){return this._userLoaded.removeHandler(e)}},{key:"addUserUnloaded",value:function(e){return this._userUnloaded.addHandler(e)}},{key:"removeUserUnloaded",value:function(e){return this._userUnloaded.removeHandler(e)}},{key:"addSilentRenewError",value:function(e){return this._silentRenewError.addHandler(e)}},{key:"removeSilentRenewError",value:function(e){return this._silentRenewError.removeHandler(e)}},{key:"_raiseSilentRenewError",value:function(){var e=v(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._silentRenewError.raise(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addUserSignedIn",value:function(e){return this._userSignedIn.addHandler(e)}},{key:"removeUserSignedIn",value:function(e){this._userSignedIn.removeHandler(e)}},{key:"_raiseUserSignedIn",value:function(){var e=v(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._userSignedIn.raise();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addUserSignedOut",value:function(e){return this._userSignedOut.addHandler(e)}},{key:"removeUserSignedOut",value:function(e){this._userSignedOut.removeHandler(e)}},{key:"_raiseUserSignedOut",value:function(){var e=v(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._userSignedOut.raise();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addUserSessionChanged",value:function(e){return this._userSessionChanged.addHandler(e)}},{key:"removeUserSessionChanged",value:function(e){this._userSessionChanged.removeHandler(e)}},{key:"_raiseUserSessionChanged",value:function(){var e=v(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._userSessionChanged.raise();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),r}(X),Ce=function(){function e(t){var r=this;y(this,e),this._userManager=t,this._logger=new F("SilentRenewService"),this._isStarted=!1,this._retryTimer=new Q("Retry Silent Renew"),this._tokenExpiring=v(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r._logger.create("_tokenExpiring"),e.prev=1,e.next=4,r._userManager.signinSilent();case 4:t.debug("silent token renewal successful"),e.next=16;break;case 7:if(e.prev=7,e.t0=e.catch(1),!(e.t0 instanceof Y)){e.next=13;break}return t.warn("ErrorTimeout from signinSilent:",e.t0,"retry in 5s"),r._retryTimer.init(5),e.abrupt("return");case 13:return t.error("Error from signinSilent:",e.t0),e.next=16,r._userManager.events._raiseSilentRenewError(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,7]])})))}return _(e,[{key:"start",value:function(){var e=v(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._logger.create("start"),this._isStarted){e.next=13;break}return this._isStarted=!0,this._userManager.events.addAccessTokenExpiring(this._tokenExpiring),this._retryTimer.addHandler(this._tokenExpiring),e.prev=5,e.next=8,this._userManager.getUser();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),t.error("getUser error",e.t0);case 13:case"end":return e.stop()}}),e,this,[[5,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){this._isStarted&&(this._retryTimer.cancel(),this._retryTimer.removeHandler(this._tokenExpiring),this._userManager.events.removeAccessTokenExpiring(this._tokenExpiring),this._isStarted=!1)}}]),e}(),Ue=_((function e(t){y(this,e),this.refresh_token=t.refresh_token,this.id_token=t.id_token,this.session_state=t.session_state,this.scope=t.scope,this.profile=t.profile,this.data=t.state})),Ne=function(){function e(t,r,n,i){y(this,e),this._logger=new F("UserManager"),this.settings=new Ze(t),this._client=new me(t),this._redirectNavigator=null!=r?r:new je(this.settings),this._popupNavigator=null!=n?n:new Ie(this.settings),this._iframeNavigator=null!=i?i:new Ee(this.settings),this._events=new Re(this.settings),this._silentRenewService=new Ce(this),this.settings.automaticSilentRenew&&this.startSilentRenew(),this._sessionMonitor=null,this.settings.monitorSession&&(this._sessionMonitor=new ke(this))}return _(e,[{key:"events",get:function(){return this._events}},{key:"metadataService",get:function(){return this._client.metadataService}},{key:"getUser",value:function(){var e=v(h().mark((function e(){var t,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._logger.create("getUser"),e.next=3,this._loadUser();case 3:if(!(r=e.sent)){e.next=9;break}return t.info("user loaded"),e.next=8,this._events.load(r,!1);case 8:return e.abrupt("return",r);case 9:return t.info("user not found in storage"),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeUser",value:function(){var e=v(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._logger.create("removeUser"),e.next=3,this.storeUser(null);case 3:return t.info("user removed from storage"),e.next=6,this._events.unload();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"signinRedirect",value:function(){var e=v(h().mark((function e(){var t,r,n,s,o=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},this._logger.create("signinRedirect"),r=t.redirectMethod,n=a(t,T),e.next=5,this._redirectNavigator.prepare({redirectMethod:r});case 5:return s=e.sent,e.next=8,this._signinStart(i({request_type:"si:r"},n),s);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"signinRedirectCallback",value:function(){var e=v(h().mark((function e(){var t,r,n,i=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:window.location.href,r=this._logger.create("signinRedirectCallback"),e.next=4,this._signinEnd(t);case 4:return(n=e.sent).profile&&n.profile.sub?r.info("success, signed in subject",n.profile.sub):r.info("no subject"),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"signinResourceOwnerCredentials",value:function(){var e=v(h().mark((function e(t){var r,n,i,a,s,o,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.username,n=t.password,i=t.skipUserInfo,a=void 0!==i&&i,s=this._logger.create("signinResourceOwnerCredential"),e.next=4,this._client.processResourceOwnerPasswordCredentials({username:r,password:n,skipUserInfo:a,extraTokenParams:this.settings.extraTokenParams});case 4:return o=e.sent,s.debug("got signin response"),e.next=8,this._buildUser(o);case 8:return(u=e.sent).profile&&u.profile.sub?s.info("success, signed in subject",u.profile.sub):s.info("no subject"),e.abrupt("return",u);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signinPopup",value:function(){var e=v(h().mark((function e(){var t,r,n,s,o,u,c,l,d=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},r=this._logger.create("signinPopup"),n=t.popupWindowFeatures,s=t.popupWindowTarget,o=a(t,Z),(u=this.settings.popup_redirect_uri)||r.throw(new Error("No popup_redirect_uri configured")),e.next=7,this._popupNavigator.prepare({popupWindowFeatures:n,popupWindowTarget:s});case 7:return c=e.sent,e.next=10,this._signin(i({request_type:"si:p",redirect_uri:u,display:"popup"},o),c);case 10:return(l=e.sent)&&(l.profile&&l.profile.sub?r.info("success, signed in subject",l.profile.sub):r.info("no subject")),e.abrupt("return",l);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"signinPopupCallback",value:function(){var e=v(h().mark((function e(){var t,r,n,i=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:window.location.href,r=i.length>1&&void 0!==i[1]&&i[1],n=this._logger.create("signinPopupCallback"),e.next=5,this._popupNavigator.callback(t,{keepOpen:r});case 5:n.info("success");case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"signinSilent",value:function(){var e=v(h().mark((function e(){var t,r,n,s,o,u,c,l,d,f,p=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},n=this._logger.create("signinSilent"),s=t.silentRequestTimeoutInSeconds,o=a(t,O),e.next=5,this._loadUser();case 5:if(!(null==(u=e.sent)?void 0:u.refresh_token)){e.next=12;break}return n.debug("using refresh token"),c=new Ue(u),e.next=11,this._useRefreshToken({state:c,redirect_uri:o.redirect_uri,resource:o.resource,extraTokenParams:o.extraTokenParams,timeoutInSeconds:s});case 11:return e.abrupt("return",e.sent);case 12:return(l=this.settings.silent_redirect_uri)||n.throw(new Error("No silent_redirect_uri configured")),u&&this.settings.validateSubOnSilentRenew&&(n.debug("subject prior to silent renew:",u.profile.sub),d=u.profile.sub),e.next=17,this._iframeNavigator.prepare({silentRequestTimeoutInSeconds:s});case 17:return f=e.sent,e.next=20,this._signin(i({request_type:"si:s",redirect_uri:l,prompt:"none",id_token_hint:this.settings.includeIdTokenInSilentRenew?null==u?void 0:u.id_token:void 0},o),f,d);case 20:return(u=e.sent)&&((null==(r=u.profile)?void 0:r.sub)?n.info("success, signed in subject",u.profile.sub):n.info("no subject")),e.abrupt("return",u);case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_useRefreshToken",value:function(){var e=v(h().mark((function e(t){var r,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._client.useRefreshToken(i(i({},t),{},{timeoutInSeconds:this.settings.silentRequestTimeoutInSeconds}));case 2:return r=e.sent,n=new we(i(i({},t.state),r)),e.next=6,this.storeUser(n);case 6:return e.next=8,this._events.load(n);case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signinSilentCallback",value:function(){var e=v(h().mark((function e(){var t,r,n=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:window.location.href,r=this._logger.create("signinSilentCallback"),e.next=4,this._iframeNavigator.callback(t);case 4:r.info("success");case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"signinCallback",value:function(){var e=v(h().mark((function e(){var t,r,n,i=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:window.location.href,e.next=3,this._client.readSigninResponseState(t);case 3:r=e.sent,n=r.state,e.t0=n.request_type,e.next="si:r"===e.t0?8:"si:p"===e.t0?11:"si:s"===e.t0?14:17;break;case 8:return e.next=10,this.signinRedirectCallback(t);case 10:case 13:case 16:return e.abrupt("return",e.sent);case 11:return e.next=13,this.signinPopupCallback(t);case 14:return e.next=16,this.signinSilentCallback(t);case 17:throw new Error("invalid response_type in state");case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"signoutCallback",value:function(){var e=v(h().mark((function e(){var t,r,n,i,a=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:window.location.href,r=a.length>1&&void 0!==a[1]&&a[1],e.next=4,this._client.readSignoutResponseState(t);case 4:if(n=e.sent,i=n.state){e.next=8;break}return e.abrupt("return");case 8:e.t0=i.request_type,e.next="so:r"===e.t0?11:"so:p"===e.t0?14:"so:s"===e.t0?17:20;break;case 11:return e.next=13,this.signoutRedirectCallback(t);case 13:case 16:case 19:return e.abrupt("break",21);case 14:return e.next=16,this.signoutPopupCallback(t,r);case 17:return e.next=19,this.signoutSilentCallback(t);case 20:throw new Error("invalid response_type in state");case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"querySessionStatus",value:function(){var e=v(h().mark((function e(){var t,r,n,s,o,u,c,l,d,f=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},r=this._logger.create("querySessionStatus"),n=t.silentRequestTimeoutInSeconds,s=a(t,E),(o=this.settings.silent_redirect_uri)||r.throw(new Error("No silent_redirect_uri configured")),e.next=7,this._loadUser();case 7:return u=e.sent,e.next=10,this._iframeNavigator.prepare({silentRequestTimeoutInSeconds:n});case 10:return c=e.sent,e.next=13,this._signinStart(i({request_type:"si:s",redirect_uri:o,prompt:"none",id_token_hint:this.settings.includeIdTokenInSilentRenew?null==u?void 0:u.id_token:void 0,response_type:this.settings.query_status_response_type,scope:"openid",skipUserInfo:!0},s),c);case 13:return l=e.sent,e.prev=14,e.next=17,this._client.processSigninResponse(l.url);case 17:if(d=e.sent,r.debug("got signin response"),!d.session_state||!d.profile.sub){e.next=22;break}return r.info("success for subject",d.profile.sub),e.abrupt("return",{session_state:d.session_state,sub:d.profile.sub});case 22:return r.info("success, user not authenticated"),e.abrupt("return",null);case 26:if(e.prev=26,e.t0=e.catch(14),!(this.settings.monitorAnonymousSession&&e.t0 instanceof G)){e.next=34;break}e.t1=e.t0.error,e.next="login_required"===e.t1||"consent_required"===e.t1||"interaction_required"===e.t1||"account_selection_required"===e.t1?32:34;break;case 32:return r.info("success for anonymous user"),e.abrupt("return",{session_state:e.t0.session_state});case 34:throw e.t0;case 35:case"end":return e.stop()}}),e,this,[[14,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"_signin",value:function(){var e=v(h().mark((function e(t,r,n){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._signinStart(t,r);case 2:return i=e.sent,e.next=5,this._signinEnd(i.url,n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"_signinStart",value:function(){var e=v(h().mark((function e(t,r){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._logger.create("_signinStart"),e.prev=1,e.next=4,this._client.createSigninRequest(t);case 4:return i=e.sent,n.debug("got signin request"),e.next=8,r.navigate({url:i.url,state:i.state.id,response_mode:i.state.response_mode,scriptOrigin:this.settings.iframeScriptOrigin});case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(1),n.debug("error after preparing navigator, closing navigator window"),r.close(),e.t0;case 16:case"end":return e.stop()}}),e,this,[[1,11]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_signinEnd",value:function(){var e=v(h().mark((function e(t,r){var n,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._logger.create("_signinEnd"),e.next=3,this._client.processSigninResponse(t);case 3:return i=e.sent,n.debug("got signin response"),e.next=7,this._buildUser(i,r);case 7:return a=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_buildUser",value:function(){var e=v(h().mark((function e(t,r){var n,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._logger.create("_buildUser"),a=new we(t),!r){e.next=7;break}if(r===a.profile.sub){e.next=6;break}throw n.debug("current user does not match user returned from signin. sub from signin:",a.profile.sub),new G(i(i({},t),{},{error:"login_required"}));case 6:n.debug("current user matches user returned from signin");case 7:return e.next=9,this.storeUser(a);case 9:return n.debug("user stored"),e.next=12,this._events.load(a);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"signoutRedirect",value:function(){var e=v(h().mark((function e(){var t,r,n,s,o,u=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:{},r=this._logger.create("signoutRedirect"),n=t.redirectMethod,s=a(t,P),e.next=5,this._redirectNavigator.prepare({redirectMethod:n});case 5:return o=e.sent,e.next=8,this._signoutStart(i({request_type:"so:r",post_logout_redirect_uri:this.settings.post_logout_redirect_uri},s),o);case 8:r.info("success");case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"signoutRedirectCallback",value:function(){var e=v(h().mark((function e(){var t,r,n,i=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:window.location.href,r=this._logger.create("signoutRedirectCallback"),e.next=4,this._signoutEnd(t);case 4:return n=e.sent,r.info("success"),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"signoutPopup",value:function(){var e=v(h().mark((function e(){var t,r,n,s,o,u,c,l=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},r=this._logger.create("signoutPopup"),n=t.popupWindowFeatures,s=t.popupWindowTarget,o=a(t,I),u=this.settings.popup_post_logout_redirect_uri,e.next=6,this._popupNavigator.prepare({popupWindowFeatures:n,popupWindowTarget:s});case 6:return c=e.sent,e.next=9,this._signout(i({request_type:"so:p",post_logout_redirect_uri:u,state:null==u?void 0:{}},o),c);case 9:r.info("success");case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"signoutPopupCallback",value:function(){var e=v(h().mark((function e(){var t,r,n,i=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:window.location.href,r=i.length>1&&void 0!==i[1]&&i[1],n=this._logger.create("signoutPopupCallback"),e.next=5,this._popupNavigator.callback(t,{keepOpen:r});case 5:n.info("success");case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_signout",value:function(){var e=v(h().mark((function e(t,r){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._signoutStart(t,r);case 2:return n=e.sent,e.next=5,this._signoutEnd(n.url);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_signoutStart",value:function(){var e=v(h().mark((function e(){var t,r,n,i,a,s,o,u=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:{},r=u.length>1?u[1]:void 0,i=this._logger.create("_signoutStart"),e.prev=3,e.next=6,this._loadUser();case 6:if(a=e.sent,i.debug("loaded current user from storage"),!this.settings.revokeTokensOnSignout){e.next=11;break}return e.next=11,this._revokeInternal(a);case 11:return(s=t.id_token_hint||a&&a.id_token)&&(i.debug("setting id_token_hint in signout request"),t.id_token_hint=s),e.next=15,this._client.createSignoutRequest(t);case 15:return o=e.sent,i.debug("got signout request"),e.next=19,r.navigate({url:o.url,state:null==(n=o.state)?void 0:n.id,scriptOrigin:this.settings.iframeScriptOrigin});case 19:return e.abrupt("return",e.sent);case 22:throw e.prev=22,e.t0=e.catch(3),i.debug("error after preparing navigator, closing navigator window"),r.close(),e.t0;case 27:case"end":return e.stop()}}),e,this,[[3,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"_signoutEnd",value:function(){var e=v(h().mark((function e(t){var r,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._logger.create("_signoutEnd"),e.next=3,this._client.processSignoutResponse(t);case 3:return n=e.sent,r.debug("got signout response"),e.next=7,this.removeUser();case 7:return r.debug("user removed"),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signoutSilent",value:function(){var e=v(h().mark((function e(){var t,r,n,s,o,u,c,l,d=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:{},n=this._logger.create("signoutSilent"),s=t.silentRequestTimeoutInSeconds,o=a(t,j),!this.settings.includeIdTokenInSilentSignout){e.next=15;break}return e.next=6,this._loadUser();case 6:if(e.t1=r=e.sent,null!=e.t1){e.next=11;break}e.t2=void 0,e.next=12;break;case 11:e.t2=r.id_token;case 12:e.t0=e.t2,e.next=16;break;case 15:e.t0=void 0;case 16:return u=e.t0,c=this.settings.popup_post_logout_redirect_uri,e.next=20,this._iframeNavigator.prepare({silentRequestTimeoutInSeconds:s});case 20:return l=e.sent,e.next=23,this._signout(i({request_type:"so:s",post_logout_redirect_uri:c,id_token_hint:u},o),l);case 23:n.info("success");case 24:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"signoutSilentCallback",value:function(){var e=v(h().mark((function e(){var t,r,n=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:window.location.href,r=this._logger.create("signoutSilentCallback"),e.next=4,this._iframeNavigator.callback(t);case 4:r.info("success");case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"revokeTokens",value:function(){var e=v(h().mark((function e(t){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._loadUser();case 2:return r=e.sent,e.next=5,this._revokeInternal(r,t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_revokeInternal",value:function(){var e=v(h().mark((function e(t){var r,n,i,a,s,o,u=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:this.settings.revokeTokenTypes,n=this._logger.create("_revokeInternal"),t){e.next=4;break}return e.abrupt("return");case 4:if(i=r.filter((function(e){return"string"===typeof t[e]})),i.length){e.next=8;break}return n.debug("no need to revoke due to no token(s)"),e.abrupt("return");case 8:a=m(i),e.prev=9,a.s();case 11:if((s=a.n()).done){e.next=19;break}return o=s.value,e.next=15,this._client.revokeToken(t[o],o);case 15:n.info("".concat(o," revoked successfully")),"access_token"!==o&&(t[o]=null);case 17:e.next=11;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(9),a.e(e.t0);case 24:return e.prev=24,a.f(),e.finish(24);case 27:return e.next=29,this.storeUser(t);case 29:return n.debug("user stored"),e.next=32,this._events.load(t);case 32:case"end":return e.stop()}}),e,this,[[9,21,24,27]])})));return function(t){return e.apply(this,arguments)}}()},{key:"startSilentRenew",value:function(){this._logger.create("startSilentRenew"),this._silentRenewService.start()}},{key:"stopSilentRenew",value:function(){this._silentRenewService.stop()}},{key:"_userStoreKey",get:function(){return"user:".concat(this.settings.authority,":").concat(this.settings.client_id)}},{key:"_loadUser",value:function(){var e=v(h().mark((function e(){var t,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._logger.create("_loadUser"),e.next=3,this.settings.userStore.get(this._userStoreKey);case 3:if(!(r=e.sent)){e.next=7;break}return t.debug("user storageString loaded"),e.abrupt("return",we.fromStorageString(r));case 7:return t.debug("no user storageString"),e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"storeUser",value:function(){var e=v(h().mark((function e(t){var r,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this._logger.create("storeUser"),!t){e.next=8;break}return r.debug("storing user"),n=t.toStorageString(),e.next=6,this.settings.userStore.set(this._userStoreKey,n);case 6:e.next=11;break;case 8:return this._logger.debug("removing user"),e.next=11,this.settings.userStore.remove(this._userStoreKey);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearStaleState",value:function(){var e=v(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._client.clearStaleState();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Me="3.0.0"},2152:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=this&&this.__read||function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)s.push(n.value)}catch(o){i={error:o}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return s};Object.defineProperty(t,"__esModule",{value:!0}),t.assert=t.AssertionError=void 0;var a=r(9604),s=r(9089),o=function(e){function t(t){var r=this.constructor,n=e.call(this,"Wrong assertion encountered"+(t?': "'.concat(t,'"'):""))||this;if(Object.setPrototypeOf(n,r.prototype),!n.stack)return n;try{(0,a.overwriteReadonlyProp)(n,"stack",n.stack.split("\n").filter((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=i(e,2)[1];return 1!==r&&2!==r})).join("\n"))}catch(s){}return n}return n(t,e),t}(Error);t.AssertionError=o,t.assert=function(e,t){if(0===arguments.length&&(e=!0),void 0===s.assertIsRefWrapper.ref){if(!e)throw new o(t)}else s.assertIsRefWrapper.ref=void 0}},9953:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.id=void 0;t.id=function(e){return e}},8653:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.is=void 0;var n=r(9089),i=["Wrong usage of the ".concat(a.name," function refer to"),"https://docs.tsafe.dev/".concat(a.name.toLowerCase())].join(" ");function a(e){var t={};if(void 0!==n.assertIsRefWrapper.ref)throw n.assertIsRefWrapper.ref=void 0,new Error(i);return n.assertIsRefWrapper.ref=t,Promise.resolve().then((function(){if(n.assertIsRefWrapper.ref===t)throw new Error(i)})),null}t.is=a},9604:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.overwriteReadonlyProp=void 0;var i=r(2152),a=r(8653);t.overwriteReadonlyProp=function(e,t,r){try{e[t]=r}catch(u){}if(e[t]===r)return r;var s=void 0,o=Object.getOwnPropertyDescriptor(e,t)||{enumerable:!0,configurable:!0};if(o.get)throw new Error("Probably a wrong ides to overwrite ".concat(String(t)," getter"));try{Object.defineProperty(e,t,n(n({},o),{value:r}))}catch(c){(0,i.assert)((0,a.is)(c)),s=c}if(e[t]!==r)throw s||new Error("Can't assign");return r}},9089:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assertIsRefWrapper=void 0;var n=r(9953);t.assertIsRefWrapper={ref:(0,n.id)(void 0)}},6972:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)},a=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function s(e){try{u(n.next(e))}catch(t){a(t)}}function o(e){try{u(n.throw(e))}catch(t){a(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,o)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,i,a,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(s=0)),s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(u){o=[6,u],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},o=this&&this.__read||function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)s.push(n.value)}catch(o){i={error:o}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return s},u=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},c=this&&this.__values||function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.createOidc=t.OidcInitializationError=void 0;var l=r(7187),d=r(9953),f=r(8187),p=r(2152),h=r(57),v=r(7625),g=r(2452),y=r(3586),_=r(3818),m=function(e){function t(t){var r=this.constructor,n=e.call(this,function(){switch(t.type){case"server down":return"The OIDC server is down";case"bad configuration":return"Bad configuration. Timed out after ".concat(t.timeoutDelayMs,"ms");case"unknown":return t.cause.message}}(),{cause:"unknown"===t.type?t.cause:void 0})||this;return n.type=t.type,Object.setPrototypeOf(n,r.prototype),n}return n(t,e),t}(Error);t.OidcInitializationError=m;var k=["code","state","session_state","iss"];function w(e){var t=e.oidcClientTsUser,r=e.decodedIdTokenSchema,n=t.access_token,i=function(){var e=t.expires_at;if(void 0!==e)return 1e3*e;var r=(0,f.readExpirationTimeInJwt)(n);if(void 0!==r)return r;(0,p.assert)(!1,"Failed to get access token expiration time")}(),a=t.refresh_token;(0,p.assert)(void 0!==a,"No refresh token provided by the oidc server");var s=function(){var e=(0,f.readExpirationTimeInJwt)(a);if(void 0!==e)return e;(0,p.assert)(!1,"Failed to get refresh token expiration time")}(),o=t.id_token;(0,p.assert)(void 0!==o,"No id token provided by the oidc server");var u={accessToken:n,accessTokenExpirationTime:i,refreshToken:a,refreshTokenExpirationTime:s,idToken:o,decodedIdToken:null},c=void 0;return Object.defineProperty(u,"decodedIdToken",{get:function(){if(void 0!==c&&c.idToken===this.idToken)return c.decodedIdToken;var e=(0,y.decodeJwt)(this.idToken);return void 0!==r&&(e=r.parse(e)),c={idToken:this.idToken,decodedIdToken:e},e},configurable:!0,enumerable:!0}),u}t.createOidc=function(e){return a(this,void 0,void 0,(function(){var t,r,n,f,y,b,x,S,T,Z,O,E,P,I,j,R,C,U,N,M,A,L,q,D,W=this;return s(this,(function(F){switch(F.label){case 0:return t=e.issuerUri,r=e.clientId,n=e.clientSecret,f=e.transformUrlBeforeRedirect,y=void 0===f?function(e){return e}:f,b=e.extraQueryParams,x=e.publicUrl,S=e.decodedIdTokenSchema,T="function"===typeof b?b:void 0!==b?function(){return b}:void 0,Z=void 0===x?window.location.origin:(x.startsWith("http")?x:"".concat(window.location.origin).concat(x)).replace(/\/$/,""),O=(0,v.fnv1aHashToHex)("".concat(t," ").concat(r)),E="configHash",P=new l.UserManager({authority:t,client_id:r,client_secret:n,redirect_uri:"",response_type:"code",scope:"openid profile",automaticSilentRenew:!1,silent_redirect_uri:"".concat(Z,"/silent-sso.html?").concat(E,"=").concat(O)}),I=void 0,j=history.pushState.bind(history),history.pushState=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return I=window.location.href,j.apply(void 0,u([],o(e),!1))},R=!1,C=function(e){var t=e.doesCurrentHrefRequiresAuth,r=e.extraQueryParams;return a(W,void 0,void 0,(function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var a=new(n.bind.apply(n,u([void 0],o(e),!1)));return new Proxy(a,{get:function(e,t){if("href"===t){var n=a.href;return Object.entries(i(i({},null===T||void 0===T?void 0:T()),r)).forEach((function(e){var t=o(e,2),r=t[0],i=t[1];return n=(0,h.addQueryParamToUrl)({url:n,name:r,value:i}).newUrl})),n=y(n)}return e[t]}})}var n,a,c;return s(this,(function(r){switch(r.label){case 0:return R?[2,new Promise((function(){}))]:(R=!0,n=window.URL,Object.defineProperty(window,"URL",{value:e}),a=(0,h.addQueryParamToUrl)({url:window.location.href,name:E,value:O}).newUrl,t&&(c=function(){"visible"===document.visibilityState&&(document.removeEventListener("visibilitychange",c),void 0!==I?window.location.href=I:window.history.back())},document.addEventListener("visibilitychange",c)),[4,P.signinRedirect({redirect_uri:a,redirectMethod:t?"replace":"assign"})]);case 1:return r.sent(),[2,new Promise((function(){}))]}}))}))},[4,function(){return a(this,void 0,void 0,(function(){var e,t,r,n,i,a,o,u,l,d,f,v,y,w;return s(this,(function(s){switch(s.label){case 0:if(e=window.location.href,!(i=(0,h.retrieveQueryParamFromUrl)({name:E,url:e})).wasPresent||i.value!==O)return[3,5];if(e=i.newUrl,(i=(0,h.retrieveQueryParamFromUrl)({name:"error",url:e})).wasPresent)throw new Error("OIDC error: ".concat(i.value));f="https://dummy.com";try{for(t=c(k),r=t.next();!r.done;r=t.next()){if(n=r.value,!(i=(0,h.retrieveQueryParamFromUrl)({name:n,url:e})).wasPresent){if("iss"===n)continue;throw new Error("Missing query param: ".concat(n))}f=(0,h.addQueryParamToUrl)({url:f,name:n,value:i.value}).newUrl,e=i.newUrl}}catch(b){y={error:b}}finally{try{r&&!r.done&&(w=t.return)&&w.call(t)}finally{if(y)throw y.error}}window.history.pushState(null,"",e),v=void 0,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,P.signinRedirectCallback(f)];case 2:return v=s.sent(),[3,4];case 3:return s.sent(),[2,void 0];case 4:return[2,v];case 5:return[4,P.getUser()];case 6:if(null===(v=s.sent()))return[3,11];s.label=7;case 7:return s.trys.push([7,9,,10]),[4,P.signinSilent()];case 8:return s.sent(),[3,10];case 9:if(a=s.sent(),(0,p.assert)(a instanceof Error),"Failed to fetch"===a.message)throw new m({type:"server down"});return[2,void 0];case 10:return[2,v];case 11:return o=new g.Deferred,u=function(){var e=(0,_.getDownlinkAndRtt)();if(void 0===e)return 5e3;var t=e.downlink,r=2.5*e.rtt+3e3/(t+1);return Math.max(3e3,r)}(),l=setTimeout((function(){return o.reject(new m({type:"bad configuration",timeoutDelayMs:u}))}),u),d=function(e){var t,r;if("string"===typeof e.data){var n=e.data,i=void 0;try{i=(0,h.retrieveQueryParamFromUrl)({name:E,url:n})}catch(w){return}if(i.wasPresent&&i.value===O)if(clearTimeout(l),window.removeEventListener("message",d),(i=(0,h.retrieveQueryParamFromUrl)({name:"error",url:n})).wasPresent)o.resolve(void 0);else{var a="https://dummy.com";try{for(var s=c(k),u=s.next();!u.done;u=s.next()){var f=u.value;if(!(i=(0,h.retrieveQueryParamFromUrl)({name:f,url:n})).wasPresent){if("iss"===f)continue;throw new Error("Missing query param: ".concat(f))}a=(0,h.addQueryParamToUrl)({url:a,name:f,value:i.value}).newUrl}}catch(p){t={error:p}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}o.resolve(a)}}},window.addEventListener("message",d,!1),P.signinSilent({silentRequestTimeoutInSeconds:u/1e3}).catch((function(e){"Failed to fetch"===e.message&&(clearTimeout(l),o.reject(new m({type:"server down"})))})),[4,o.pr];case 12:return void 0===(f=s.sent())?[3,14]:[4,P.signinRedirectCallback(f)];case 13:return[2,v=s.sent()];case 14:return[2,void 0]}}))}))}().then((function(e){if(void 0!==e){var n=w({oidcClientTsUser:e,decodedIdTokenSchema:S});return n.refreshTokenExpirationTime<n.accessTokenExpirationTime&&console.warn(["The OIDC refresh token shorter than the one of the access token.","This is very unusual and probably a misconfiguration.","Check your oidc server configuration for ".concat(r," ").concat(t)].join(" ")),n}}),(function(e){return(0,p.assert)(e instanceof Error),e}))];case 1:return U=F.sent(),N={params:{issuerUri:t,clientId:r}},U instanceof Error?(A=(M=U)instanceof m?M:new m({type:"unknown",cause:M}),console.error("OIDC initilization error: ".concat(A.message)),[2,(0,d.id)(i(i({},N),{isUserLoggedIn:!1,login:function(){return a(W,void 0,void 0,(function(){return s(this,(function(e){return alert("Authentication is currently unavailable. Please try again later."),[2,new Promise((function(){}))]}))}))},initializationError:A}))]):void 0===U?[2,(0,d.id)(i(i({},N),{isUserLoggedIn:!1,login:C,initializationError:void 0}))]:(L=U,q=new Set,D=(0,d.id)(i(i({},N),{isUserLoggedIn:!0,getTokens:function(){return L},logout:function(e){return a(W,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,P.signoutRedirect({post_logout_redirect_uri:function(){switch(e.redirectTo){case"current page":return window.location.href;case"home":return Z;case"specific url":return e.url}(0,p.assert)(!1)}()})];case 1:return t.sent(),[2,new Promise((function(){}))]}}))}))},renewTokens:function(){return a(W,void 0,void 0,(function(){var e,t;return s(this,(function(r){switch(r.label){case 0:return[4,P.signinSilent()];case 1:return e=r.sent(),(0,p.assert)(null!==e),t=Object.getOwnPropertyDescriptor(L,"decodedIdToken"),(0,p.assert)(void 0!==t),L=w({oidcClientTsUser:e,decodedIdTokenSchema:S}),Object.defineProperty(L,"decodedIdToken",t),q.forEach((function(e){return e()})),[2]}}))}))},subscribeToTokensChange:function(e){return q.add(e),{unsubscribe:function(){q.delete(e)}}}})),function e(){var t=this,r=Math.min(L.accessTokenExpirationTime,L.refreshTokenExpirationTime)-Date.now();setTimeout((function(){return a(t,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,4]),[4,D.renewTokens()];case 1:case 3:return t.sent(),[3,4];case 2:return t.sent(),[4,C({doesCurrentHrefRequiresAuth:!0})];case 4:return e(),[2]}}))}))}),r-25e3)}(),[2,D])}}))}))}},9243:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)},i=this&&this.__read||function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)s.push(n.value)}catch(o){i={error:o}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return s};Object.defineProperty(t,"__esModule",{value:!0}),t.createReactOidc=void 0;var a=r(184),s=r(2791),o=r(6972),u=r(2152),c=r(9953),l=r(5666),d=(0,s.createContext)(void 0);t.createReactOidc=function(e){var t=(0,o.createOidc)(e),r=e.decodedIdTokenSchema;return{OidcProvider:function(e){var n=e.children,o=e.fallback,u=i((0,s.useState)(void 0),2),c=u[0],l=u[1];return(0,s.useEffect)((function(){t.then(l)}),[]),void 0===c?(0,a.jsx)(a.Fragment,{children:void 0===o?null:o}):(0,a.jsx)(d.Provider,{value:{oidc:c,decodedIdTokenSchema:r},children:n})},useOidc:function(e){var t=(null!==e&&void 0!==e?e:{}).assertUserLoggedIn,a=void 0!==t&&t,o=function(){var e=(0,s.useContext)(d);return(0,u.assert)(void 0!==e,"You must use useOidc inside a OidcProvider"),e}(),f=o.oidc,p=o.decodedIdTokenSchema,h=i((0,s.useReducer)((function(){return[]}),[]),2)[1];if((0,s.useEffect)((function(){if(f.isUserLoggedIn)return f.subscribeToTokensChange(h).unsubscribe}),[f]),a&&!f.isUserLoggedIn)throw new Error("The user must be logged in to use this hook (assertUserLoggedIn was set to true)");var v=function(){var e=f.isUserLoggedIn?f.getTokens():void 0;return{oidcTokens:(0,l.useGuaranteedMemo)((function(){if(void 0!==e){var t={accessToken:e.accessToken,accessTokenExpirationTime:e.accessTokenExpirationTime,idToken:e.idToken,refreshToken:e.refreshToken,refreshTokenExpirationTime:e.refreshTokenExpirationTime,decodedIdToken:null},n=void 0;return Object.defineProperty(t,"decodedIdToken",{get:function(){if(void 0!==n)return n.decodedIdToken;var t=e.decodedIdToken;return void 0!==r&&r!==p&&(t=r.parse(t)),n={decodedIdToken:t},t}}),t}}),[null===e||void 0===e?void 0:e.accessToken,null===e||void 0===e?void 0:e.accessTokenExpirationTime,null===e||void 0===e?void 0:e.idToken,null===e||void 0===e?void 0:e.refreshToken,null===e||void 0===e?void 0:e.refreshTokenExpirationTime])}}().oidcTokens,g={params:f.params};return f.isUserLoggedIn?(0,c.id)(((0,u.assert)(void 0!==v),n(n({},g),{isUserLoggedIn:!0,oidcTokens:v,logout:f.logout,renewTokens:f.renewTokens}))):(0,c.id)(n(n({},g),{isUserLoggedIn:!1,login:f.login,initializationError:f.initializationError}))},prOidc:t}}},2452:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.VoidDeferred=t.Deferred=void 0;var i=r(9604),a=function(){var e,t,r=this;this.isPending=!0,this.pr=new Promise((function(n,a){e=function(e){(0,i.overwriteReadonlyProp)(r,"isPending",!1),n(e)},t=function(e){(0,i.overwriteReadonlyProp)(r,"isPending",!1),a(e)}})),this.resolve=e,this.reject=t};t.Deferred=a;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(a);t.VoidDeferred=s},3586:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.decodeJwt=void 0;var i=n(r(456));t.decodeJwt=i.default},7625:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fnv1aHashToHex=void 0,t.fnv1aHashToHex=function(e){for(var t=2166136261,r=0;r<e.length;r++)t^=e.charCodeAt(r),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);return(t>>>0).toString(16)}},3818:function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.getDownlinkAndRtt=void 0;var i=r(2152);t.getDownlinkAndRtt=function(){var e,t;if(window.navigator instanceof Object){var r=window.navigator;try{for(var a=n(["connection","mozConnection","webkitConnection"]),s=a.next();!s.done;s=a.next()){var o=s.value;try{var u=r[o],c=u.downlink,l=u.rtt;return(0,i.assert)("number"===typeof c),(0,i.assert)("number"===typeof l),{downlink:c,rtt:l}}catch(d){}}}catch(f){e={error:f}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}}}},5666:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)s.push(n.value)}catch(o){i={error:o}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return s},i=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.useGuaranteedMemo=void 0;var a=r(2791);t.useGuaranteedMemo=function(e,t){var r=(0,a.useRef)();return(!r.current||t.length!==r.current.prevDeps.length||r.current.prevDeps.map((function(e,r){return e===t[r]})).indexOf(!1)>=0)&&(r.current={v:e(),prevDeps:i([],n(t),!1)}),r.current.v}},8187:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.readExpirationTimeInJwt=void 0;var i=n(r(456)),a=r(2152);t.readExpirationTimeInJwt=function(e){var t;try{t=1e3*(0,i.default)(e).exp,(0,a.assert)("number"===typeof t&&!isNaN(t))}catch(r){return}return t}},57:function(e,t){"use strict";var r=this&&this.__read||function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)s.push(n.value)}catch(o){i={error:o}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return s};function n(e){var t=e.url,n=e.prefix,i=e.doLeavePrefixInResults,a=r(t.split("?"),2),s=a[0],o=a[1],u=void 0===o?"":o,c={},l=function(){var e=u.replace(/^\?/,"").split("&").map((function(e){return e.split("=")})).filter((function(e){var t=r(e,2),a=t[0],s=t[1];return!a.startsWith(n)||(c[i?a:a.substring(n.length)]=decodeURIComponent(s),!1)})).map((function(e){return e.join("=")})).join("&");return{newLocationSearch:e=""===e?"":"?".concat(e)}}().newLocationSearch;return{newUrl:"".concat(s).concat(l),values:c}}function i(e){var t=e.url,r=e.name,i=n({url:t,prefix:r,doLeavePrefixInResults:!0}),a=i.newUrl,s=i.values;return r in s?{wasPresent:!0,newUrl:a,value:s[r]}:{wasPresent:!1}}Object.defineProperty(t,"__esModule",{value:!0}),t.retrieveQueryParamFromUrl=t.retrieveAllQueryParamStartingWithPrefixFromUrl=t.addQueryParamToUrl=void 0,t.addQueryParamToUrl=function(e){var t=e.url,r=e.name,n=e.value,a=t,s=i({url:t,name:r});return s.wasPresent&&(a=s.newUrl),{newUrl:a+="".concat(a.includes("?")?"&":a.endsWith("?")?"":"?").concat(r,"=").concat(encodeURIComponent(n))}},t.retrieveAllQueryParamStartingWithPrefixFromUrl=n,t.retrieveQueryParamFromUrl=i},3897:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports},5372:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},3405:function(e,t,r){var n=r(3897);e.exports=function(e){if(Array.isArray(e))return n(e)},e.exports.__esModule=!0,e.exports.default=e.exports},6115:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},7156:function(e){function t(e,t,r,n,i,a,s){try{var o=e[a](s),u=o.value}catch(c){return void r(c)}o.done?t(u):Promise.resolve(u).then(n,i)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise((function(i,a){var s=e.apply(r,n);function o(e){t(s,i,a,o,u,"next",e)}function u(e){t(s,i,a,o,u,"throw",e)}o(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},6690:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},3515:function(e,t,r){var n=r(6015),i=r(9617);function a(t,r,s){return i()?(e.exports=a=Reflect.construct.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=a=function(e,t,r){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return r&&n(a,r.prototype),a},e.exports.__esModule=!0,e.exports.default=e.exports),a.apply(null,arguments)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},9728:function(e,t,r){var n=r(4062);function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,n(i.key),i)}}e.exports=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},4704:function(e,t,r){var n=r(6116);e.exports=function(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=n(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,s=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw s}}}},e.exports.__esModule=!0,e.exports.default=e.exports},6389:function(e,t,r){var n=r(3808),i=r(9617),a=r(4993);e.exports=function(e){var t=i();return function(){var r,i=n(e);if(t){var s=n(this).constructor;r=Reflect.construct(i,arguments,s)}else r=i.apply(this,arguments);return a(this,r)}},e.exports.__esModule=!0,e.exports.default=e.exports},8416:function(e,t,r){var n=r(4062);e.exports=function(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},1588:function(e,t,r){var n=r(1753);function i(){return"undefined"!==typeof Reflect&&Reflect.get?(e.exports=i=Reflect.get.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=i=function(e,t,r){var i=n(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(arguments.length<3?e:r):a.value}},e.exports.__esModule=!0,e.exports.default=e.exports),i.apply(this,arguments)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},3808:function(e){function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},1655:function(e,t,r){var n=r(6015);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},6035:function(e){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")},e.exports.__esModule=!0,e.exports.default=e.exports},9617:function(e){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports},9498:function(e){e.exports=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},8872:function(e){e.exports=function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,s,o=[],u=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}},e.exports.__esModule=!0,e.exports.default=e.exports},2218:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},2281:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},3012:function(e){e.exports=function(e){if(null==e)throw new TypeError("Cannot destructure "+e)},e.exports.__esModule=!0,e.exports.default=e.exports},2122:function(e,t,r){var n=r(8416);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}e.exports=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e},e.exports.__esModule=!0,e.exports.default=e.exports},215:function(e,t,r){var n=r(7071);e.exports=function(e,t){if(null==e)return{};var r,i,a=n(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a},e.exports.__esModule=!0,e.exports.default=e.exports},7071:function(e){e.exports=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i},e.exports.__esModule=!0,e.exports.default=e.exports},4993:function(e,t,r){var n=r(8698).default,i=r(6115);e.exports=function(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.__esModule=!0,e.exports.default=e.exports},7061:function(e,t,r){var n=r(8698).default;function i(){"use strict";e.exports=i=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},r=Object.prototype,a=r.hasOwnProperty,s=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},u=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function d(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(j){d=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),o=new E(n||[]);return s(a,"_invoke",{value:S(e,r,o)}),a}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(j){return{type:"throw",arg:j}}}t.wrap=f;var h={};function v(){}function g(){}function y(){}var _={};d(_,u,(function(){return this}));var m=Object.getPrototypeOf,k=m&&m(m(P([])));k&&k!==r&&a.call(k,u)&&(_=k);var w=y.prototype=v.prototype=Object.create(_);function b(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(i,s,o,u){var c=p(e[i],e,s);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,o,u)}),(function(e){r("throw",e,o,u)})):t.resolve(d).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,u)}))}u(c.arg)}var i;s(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}})}function S(e,t,r){var n="suspendedStart";return function(i,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw a;return I()}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var o=T(s,r);if(o){if(o===h)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=p(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function T(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,T(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var i=p(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function Z(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(Z,this),this.reset(!0)}function P(e){if(e){var t=e[u];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(a.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:I}}function I(){return{value:void 0,done:!0}}return g.prototype=y,s(w,"constructor",{value:y,configurable:!0}),s(y,"constructor",{value:g,configurable:!0}),g.displayName=d(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,d(e,l,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},b(x.prototype),d(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,i,a){void 0===a&&(a=Promise);var s=new x(f(e,r,n,i),a);return t.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},b(w),d(w,l,"Generator"),d(w,u,(function(){return this})),d(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=P,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return s.type="throw",s.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],s=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var o=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(o&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(o){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;O(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},6015:function(e){function t(r,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},7424:function(e,t,r){var n=r(5372),i=r(8872),a=r(6116),s=r(2218);e.exports=function(e,t){return n(e)||i(e,t)||a(e,t)||s()},e.exports.__esModule=!0,e.exports.default=e.exports},1753:function(e,t,r){var n=r(3808);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=n(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports},861:function(e,t,r){var n=r(3405),i=r(9498),a=r(6116),s=r(2281);e.exports=function(e){return n(e)||i(e)||a(e)||s()},e.exports.__esModule=!0,e.exports.default=e.exports},5036:function(e,t,r){var n=r(8698).default;e.exports=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},4062:function(e,t,r){var n=r(8698).default,i=r(5036);e.exports=function(e){var t=i(e,"string");return"symbol"===n(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},8698:function(e){function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},6116:function(e,t,r){var n=r(3897);e.exports=function(e,t){if(e){if("string"===typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},3496:function(e,t,r){var n=r(3808),i=r(6015),a=r(6035),s=r(3515);function o(t){var r="function"===typeof Map?new Map:void 0;return e.exports=o=function(e){if(null===e||!a(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return s(e,arguments,n(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i(t,e)},e.exports.__esModule=!0,e.exports.default=e.exports,o(t)}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},8694:function(e,t,r){"use strict";var n=r(9728).default,i=r(6690).default,a=r(1655).default,s=r(6389).default,o=r(3496).default;Object.defineProperty(t,"__esModule",{value:!0}),t.jwtDecode=t.InvalidTokenError=void 0;var u=function(e){a(r,e);var t=s(r);function r(){return i(this,r),t.apply(this,arguments)}return n(r)}(o(Error));function c(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function(e){return decodeURIComponent(atob(e).replace(/(.)/g,(function(e,t){var r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r})))}(t)}catch(r){return atob(t)}}t.InvalidTokenError=u,u.prototype.name="InvalidTokenError",t.jwtDecode=function(e,t){if("string"!==typeof e)throw new u("Invalid token specified: must be a string");t||(t={});var r,n=!0===t.header?0:1,i=e.split(".")[n];if("string"!==typeof i)throw new u("Invalid token specified: missing part #".concat(n+1));try{r=c(i)}catch(a){throw new u("Invalid token specified: invalid base64 for part #".concat(n+1," (").concat(a.message,")"))}try{return JSON.parse(r)}catch(a){throw new u("Invalid token specified: invalid json for part #".concat(n+1," (").concat(a.message,")"))}}},4942:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(9142);function i(e,t,r){return(t=(0,n.Z)(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},1413:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(4942);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},9142:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(1002);function i(e){var t=function(e,t){if("object"!==(0,n.Z)(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==(0,n.Z)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===(0,n.Z)(t)?t:String(t)}},4690:function(e,t,r){"use strict";r.d(t,{z:function(){return Et}});var n=r(885),i=r(4942),a=r(4165),s=r(5861),o=r(2982);function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=r(9142);function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(0,c.Z)(n.key),n)}}function d(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var y=r(1002);function _(e){var t=g();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===(0,y.Z)(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}(this,r)}}function m(e,t,r){return m=g()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&p(i,r.prototype),i},m.apply(null,arguments)}function k(e){var t="function"===typeof Map?new Map:void 0;return k=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return m(e,arguments,v(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),p(n,e)},k(e)}var w,b,x=r(1413),S=r(7762);!function(e){e.assertEqual=function(e){return e},e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=function(e){var t,r={},n=(0,S.Z)(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;r[i]=i}}catch(a){n.e(a)}finally{n.f()}return r},e.getValidEnumValues=function(t){var r,n=e.objectKeys(t).filter((function(e){return"number"!==typeof t[t[e]]})),i={},a=(0,S.Z)(n);try{for(a.s();!(r=a.n()).done;){var s=r.value;i[s]=t[s]}}catch(o){a.e(o)}finally{a.f()}return e.objectValues(i)},e.objectValues=function(t){return e.objectKeys(t).map((function(e){return t[e]}))},e.objectKeys="function"===typeof Object.keys?function(e){return Object.keys(e)}:function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=function(e,t){var r,n=(0,S.Z)(e);try{for(n.s();!(r=n.n()).done;){var i=r.value;if(t(i))return i}}catch(a){n.e(a)}finally{n.f()}},e.isInteger="function"===typeof Number.isInteger?function(e){return Number.isInteger(e)}:function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e},e.joinValues=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" | ";return e.map((function(e){return"string"===typeof e?"'".concat(e,"'"):e})).join(t)},e.jsonStringifyReplacer=function(e,t){return"bigint"===typeof t?t.toString():t}}(w||(w={})),function(e){e.mergeShapes=function(e,t){return(0,x.Z)((0,x.Z)({},e),t)}}(b||(b={}));var T=w.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Z=function(e){switch(typeof e){case"undefined":return T.undefined;case"string":return T.string;case"number":return isNaN(e)?T.nan:T.number;case"boolean":return T.boolean;case"function":return T.function;case"bigint":return T.bigint;case"symbol":return T.symbol;case"object":return Array.isArray(e)?T.array:null===e?T.null:e.then&&"function"===typeof e.then&&e.catch&&"function"===typeof e.catch?T.promise:"undefined"!==typeof Map&&e instanceof Map?T.map:"undefined"!==typeof Set&&e instanceof Set?T.set:"undefined"!==typeof Date&&e instanceof Date?T.date:T.object;default:return T.unknown}},O=w.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),E=function(e){h(r,e);var t=_(r);function r(e){var n;u(this,r),(n=t.call(this)).issues=[],n.addIssue=function(e){n.issues=[].concat((0,o.Z)(n.issues),[e])},n.addIssues=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];n.issues=[].concat((0,o.Z)(n.issues),(0,o.Z)(e))};var i=(this instanceof r?this.constructor:void 0).prototype;return Object.setPrototypeOf?Object.setPrototypeOf(f(n),i):n.__proto__=i,n.name="ZodError",n.issues=e,n}return d(r,[{key:"errors",get:function(){return this.issues}},{key:"format",value:function(e){var t=e||function(e){return e.message},r={_errors:[]};return function e(n){var i,a=(0,S.Z)(n.issues);try{for(a.s();!(i=a.n()).done;){var s=i.value;if("invalid_union"===s.code)s.unionErrors.map(e);else if("invalid_return_type"===s.code)e(s.returnTypeError);else if("invalid_arguments"===s.code)e(s.argumentsError);else if(0===s.path.length)r._errors.push(t(s));else for(var o=r,u=0;u<s.path.length;){var c=s.path[u];u===s.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(t(s))):o[c]=o[c]||{_errors:[]},o=o[c],u++}}}catch(l){a.e(l)}finally{a.f()}}(this),r}},{key:"toString",value:function(){return this.message}},{key:"message",get:function(){return JSON.stringify(this.issues,w.jsonStringifyReplacer,2)}},{key:"isEmpty",get:function(){return 0===this.issues.length}},{key:"flatten",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e.message},r={},n=[],i=(0,S.Z)(this.issues);try{for(i.s();!(e=i.n()).done;){var a=e.value;a.path.length>0?(r[a.path[0]]=r[a.path[0]]||[],r[a.path[0]].push(t(a))):n.push(t(a))}}catch(s){i.e(s)}finally{i.f()}return{formErrors:n,fieldErrors:r}}},{key:"formErrors",get:function(){return this.flatten()}}]),r}(k(Error));E.create=function(e){return new E(e)};var P=function(e,t){var r;switch(e.code){case O.invalid_type:r=e.received===T.undefined?"Required":"Expected ".concat(e.expected,", received ").concat(e.received);break;case O.invalid_literal:r="Invalid literal value, expected ".concat(JSON.stringify(e.expected,w.jsonStringifyReplacer));break;case O.unrecognized_keys:r="Unrecognized key(s) in object: ".concat(w.joinValues(e.keys,", "));break;case O.invalid_union:r="Invalid input";break;case O.invalid_union_discriminator:r="Invalid discriminator value. Expected ".concat(w.joinValues(e.options));break;case O.invalid_enum_value:r="Invalid enum value. Expected ".concat(w.joinValues(e.options),", received '").concat(e.received,"'");break;case O.invalid_arguments:r="Invalid function arguments";break;case O.invalid_return_type:r="Invalid function return type";break;case O.invalid_date:r="Invalid date";break;case O.invalid_string:"object"===typeof e.validation?"includes"in e.validation?(r='Invalid input: must include "'.concat(e.validation.includes,'"'),"number"===typeof e.validation.position&&(r="".concat(r," at one or more positions greater than or equal to ").concat(e.validation.position))):"startsWith"in e.validation?r='Invalid input: must start with "'.concat(e.validation.startsWith,'"'):"endsWith"in e.validation?r='Invalid input: must end with "'.concat(e.validation.endsWith,'"'):w.assertNever(e.validation):r="regex"!==e.validation?"Invalid ".concat(e.validation):"Invalid";break;case O.too_small:r="array"===e.type?"Array must contain ".concat(e.exact?"exactly":e.inclusive?"at least":"more than"," ").concat(e.minimum," element(s)"):"string"===e.type?"String must contain ".concat(e.exact?"exactly":e.inclusive?"at least":"over"," ").concat(e.minimum," character(s)"):"number"===e.type?"Number must be ".concat(e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than ").concat(e.minimum):"date"===e.type?"Date must be ".concat(e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than ").concat(new Date(Number(e.minimum))):"Invalid input";break;case O.too_big:r="array"===e.type?"Array must contain ".concat(e.exact?"exactly":e.inclusive?"at most":"less than"," ").concat(e.maximum," element(s)"):"string"===e.type?"String must contain ".concat(e.exact?"exactly":e.inclusive?"at most":"under"," ").concat(e.maximum," character(s)"):"number"===e.type?"Number must be ".concat(e.exact?"exactly":e.inclusive?"less than or equal to":"less than"," ").concat(e.maximum):"bigint"===e.type?"BigInt must be ".concat(e.exact?"exactly":e.inclusive?"less than or equal to":"less than"," ").concat(e.maximum):"date"===e.type?"Date must be ".concat(e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"," ").concat(new Date(Number(e.maximum))):"Invalid input";break;case O.custom:r="Invalid input";break;case O.invalid_intersection_types:r="Intersection results could not be merged";break;case O.not_multiple_of:r="Number must be a multiple of ".concat(e.multipleOf);break;case O.not_finite:r="Number must be finite";break;default:r=t.defaultError,w.assertNever(e)}return{message:r}},I=P;function j(){return I}var R=function(e){var t,r=e.data,n=e.path,i=e.errorMaps,a=e.issueData,s=[].concat((0,o.Z)(n),(0,o.Z)(a.path||[])),u=(0,x.Z)((0,x.Z)({},a),{},{path:s}),c="",l=i.filter((function(e){return!!e})).slice().reverse(),d=(0,S.Z)(l);try{for(d.s();!(t=d.n()).done;){c=(0,t.value)(u,{data:r,defaultError:c}).message}}catch(f){d.e(f)}finally{d.f()}return(0,x.Z)((0,x.Z)({},a),{},{path:s,message:a.message||c})};function C(e,t){var r=R({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,j(),P].filter((function(e){return!!e}))});e.common.issues.push(r)}var U,N=function(){function e(){u(this,e),this.value="valid"}return d(e,[{key:"dirty",value:function(){"valid"===this.value&&(this.value="dirty")}},{key:"abort",value:function(){"aborted"!==this.value&&(this.value="aborted")}}],[{key:"mergeArray",value:function(e,t){var r,n=[],i=(0,S.Z)(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;if("aborted"===a.status)return M;"dirty"===a.status&&e.dirty(),n.push(a.value)}}catch(s){i.e(s)}finally{i.f()}return{status:e.value,value:n}}},{key:"mergeObjectAsync",value:function(){var t=(0,s.Z)((0,a.Z)().mark((function t(r,n){var i,s,o,u;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=[],s=(0,S.Z)(n),t.prev=2,s.s();case 4:if((o=s.n()).done){t.next=17;break}return u=o.value,t.t0=i,t.next=9,u.key;case 9:return t.t1=t.sent,t.next=12,u.value;case 12:t.t2=t.sent,t.t3={key:t.t1,value:t.t2},t.t0.push.call(t.t0,t.t3);case 15:t.next=4;break;case 17:t.next=22;break;case 19:t.prev=19,t.t4=t.catch(2),s.e(t.t4);case 22:return t.prev=22,s.f(),t.finish(22);case 25:return t.abrupt("return",e.mergeObjectSync(r,i));case 26:case"end":return t.stop()}}),t,null,[[2,19,22,25]])})));return function(e,r){return t.apply(this,arguments)}}()},{key:"mergeObjectSync",value:function(e,t){var r,n={},i=(0,S.Z)(t);try{for(i.s();!(r=i.n()).done;){var a=r.value,s=a.key,o=a.value;if("aborted"===s.status)return M;if("aborted"===o.status)return M;"dirty"===s.status&&e.dirty(),"dirty"===o.status&&e.dirty(),"__proto__"===s.value||"undefined"===typeof o.value&&!a.alwaysSet||(n[s.value]=o.value)}}catch(u){i.e(u)}finally{i.f()}return{status:e.value,value:n}}}]),e}(),M=Object.freeze({status:"aborted"}),A=function(e){return{status:"dirty",value:e}},L=function(e){return{status:"valid",value:e}},q=function(e){return"aborted"===e.status},D=function(e){return"dirty"===e.status},W=function(e){return"valid"===e.status},F=function(e){return"undefined"!==typeof Promise&&e instanceof Promise};!function(e){e.errToObj=function(e){return"string"===typeof e?{message:e}:e||{}},e.toString=function(e){return"string"===typeof e?e:null===e||void 0===e?void 0:e.message}}(U||(U={}));var H=function(){function e(t,r,n,i){u(this,e),this._cachedPath=[],this.parent=t,this.data=r,this._path=n,this._key=i}return d(e,[{key:"path",get:function(){var e,t;this._cachedPath.length||(this._key instanceof Array?(e=this._cachedPath).push.apply(e,(0,o.Z)(this._path).concat((0,o.Z)(this._key))):(t=this._cachedPath).push.apply(t,(0,o.Z)(this._path).concat([this._key])));return this._cachedPath}}]),e}(),z=function(e,t){if(W(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;var t=new E(e.common.issues);return this._error=t,this._error}}};function K(e){if(!e)return{};var t=e.errorMap,r=e.invalid_type_error,n=e.required_error,i=e.description;if(t&&(r||n))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:i};return{errorMap:function(e,t){return"invalid_type"!==e.code?{message:t.defaultError}:"undefined"===typeof t.data?{message:null!==n&&void 0!==n?n:t.defaultError}:{message:null!==r&&void 0!==r?r:t.defaultError}},description:i}}var V,J=function(){function e(t){u(this,e),this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}return d(e,[{key:"description",get:function(){return this._def.description}},{key:"_getType",value:function(e){return Z(e.data)}},{key:"_getOrReturnCtx",value:function(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Z(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}},{key:"_processInputParams",value:function(e){return{status:new N,ctx:{common:e.parent.common,data:e.data,parsedType:Z(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}},{key:"_parseSync",value:function(e){var t=this._parse(e);if(F(t))throw new Error("Synchronous parse encountered promise.");return t}},{key:"_parseAsync",value:function(e){var t=this._parse(e);return Promise.resolve(t)}},{key:"parse",value:function(e,t){var r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}},{key:"safeParse",value:function(e,t){var r,n={common:{issues:[],async:null!==(r=null===t||void 0===t?void 0:t.async)&&void 0!==r&&r,contextualErrorMap:null===t||void 0===t?void 0:t.errorMap},path:(null===t||void 0===t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Z(e)},i=this._parseSync({data:e,path:n.path,parent:n});return z(n,i)}},{key:"parseAsync",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,r){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.safeParseAsync(t,r);case 2:if(!(n=e.sent).success){e.next=5;break}return e.abrupt("return",n.data);case 5:throw n.error;case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"safeParseAsync",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,r){var n,i,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={common:{issues:[],contextualErrorMap:null===r||void 0===r?void 0:r.errorMap,async:!0},path:(null===r||void 0===r?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Z(t)},i=this._parse({data:t,path:n.path,parent:n}),e.next=4,F(i)?i:Promise.resolve(i);case 4:return s=e.sent,e.abrupt("return",z(n,s));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"refine",value:function(e,t){return this._refinement((function(r,n){var i=e(r),a=function(){return n.addIssue((0,x.Z)({code:O.custom},function(e){return"string"===typeof t||"undefined"===typeof t?{message:t}:"function"===typeof t?t(e):t}(r)))};return"undefined"!==typeof Promise&&i instanceof Promise?i.then((function(e){return!!e||(a(),!1)})):!!i||(a(),!1)}))}},{key:"refinement",value:function(e,t){return this._refinement((function(r,n){return!!e(r)||(n.addIssue("function"===typeof t?t(r,n):t),!1)}))}},{key:"_refinement",value:function(e){return new Ce({schema:this,typeName:He.ZodEffects,effect:{type:"refinement",refinement:e}})}},{key:"superRefine",value:function(e){return this._refinement(e)}},{key:"optional",value:function(){return Ue.create(this,this._def)}},{key:"nullable",value:function(){return Ne.create(this,this._def)}},{key:"nullish",value:function(){return this.nullable().optional()}},{key:"array",value:function(){return he.create(this,this._def)}},{key:"promise",value:function(){return Re.create(this,this._def)}},{key:"or",value:function(e){return ye.create([this,e],this._def)}},{key:"and",value:function(e){return we.create(this,e,this._def)}},{key:"transform",value:function(e){return new Ce((0,x.Z)((0,x.Z)({},K(this._def)),{},{schema:this,typeName:He.ZodEffects,effect:{type:"transform",transform:e}}))}},{key:"default",value:function(e){var t="function"===typeof e?e:function(){return e};return new Me((0,x.Z)((0,x.Z)({},K(this._def)),{},{innerType:this,defaultValue:t,typeName:He.ZodDefault}))}},{key:"brand",value:function(){return new De((0,x.Z)({typeName:He.ZodBranded,type:this},K(this._def)))}},{key:"catch",value:function(e){var t="function"===typeof e?e:function(){return e};return new Ae((0,x.Z)((0,x.Z)({},K(this._def)),{},{innerType:this,catchValue:t,typeName:He.ZodCatch}))}},{key:"describe",value:function(e){return new(0,this.constructor)((0,x.Z)((0,x.Z)({},this._def),{},{description:e}))}},{key:"pipe",value:function(e){return We.create(this,e)}},{key:"readonly",value:function(){return Fe.create(this)}},{key:"isOptional",value:function(){return this.safeParse(void 0).success}},{key:"isNullable",value:function(){return this.safeParse(null).success}}]),e}(),B=/^c[^\s-]{8,}$/i,Q=/^[a-z][a-z0-9]*$/,$=/^[0-9A-HJKMNP-TV-Z]{26}$/,G=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Y=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,X=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,ee=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/;var te=function(e){h(r,e);var t=_(r);function r(){return u(this,r),t.apply(this,arguments)}return d(r,[{key:"_parse",value:function(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==T.string){var t=this._getOrReturnCtx(e);return C(t,{code:O.invalid_type,expected:T.string,received:t.parsedType}),M}var r,n,i,a,s=new N,o=void 0,u=(0,S.Z)(this._def.checks);try{for(u.s();!(r=u.n()).done;){var c=r.value;if("min"===c.kind)e.data.length<c.value&&(C(o=this._getOrReturnCtx(e,o),{code:O.too_small,minimum:c.value,type:"string",inclusive:!0,exact:!1,message:c.message}),s.dirty());else if("max"===c.kind)e.data.length>c.value&&(C(o=this._getOrReturnCtx(e,o),{code:O.too_big,maximum:c.value,type:"string",inclusive:!0,exact:!1,message:c.message}),s.dirty());else if("length"===c.kind){var l=e.data.length>c.value,d=e.data.length<c.value;(l||d)&&(o=this._getOrReturnCtx(e,o),l?C(o,{code:O.too_big,maximum:c.value,type:"string",inclusive:!0,exact:!0,message:c.message}):d&&C(o,{code:O.too_small,minimum:c.value,type:"string",inclusive:!0,exact:!0,message:c.message}),s.dirty())}else if("email"===c.kind)Y.test(e.data)||(C(o=this._getOrReturnCtx(e,o),{validation:"email",code:O.invalid_string,message:c.message}),s.dirty());else if("emoji"===c.kind)V||(V=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),V.test(e.data)||(C(o=this._getOrReturnCtx(e,o),{validation:"emoji",code:O.invalid_string,message:c.message}),s.dirty());else if("uuid"===c.kind)G.test(e.data)||(C(o=this._getOrReturnCtx(e,o),{validation:"uuid",code:O.invalid_string,message:c.message}),s.dirty());else if("cuid"===c.kind)B.test(e.data)||(C(o=this._getOrReturnCtx(e,o),{validation:"cuid",code:O.invalid_string,message:c.message}),s.dirty());else if("cuid2"===c.kind)Q.test(e.data)||(C(o=this._getOrReturnCtx(e,o),{validation:"cuid2",code:O.invalid_string,message:c.message}),s.dirty());else if("ulid"===c.kind)$.test(e.data)||(C(o=this._getOrReturnCtx(e,o),{validation:"ulid",code:O.invalid_string,message:c.message}),s.dirty());else if("url"===c.kind)try{new URL(e.data)}catch(f){C(o=this._getOrReturnCtx(e,o),{validation:"url",code:O.invalid_string,message:c.message}),s.dirty()}else if("regex"===c.kind){c.regex.lastIndex=0,c.regex.test(e.data)||(C(o=this._getOrReturnCtx(e,o),{validation:"regex",code:O.invalid_string,message:c.message}),s.dirty())}else if("trim"===c.kind)e.data=e.data.trim();else if("includes"===c.kind)e.data.includes(c.value,c.position)||(C(o=this._getOrReturnCtx(e,o),{code:O.invalid_string,validation:{includes:c.value,position:c.position},message:c.message}),s.dirty());else if("toLowerCase"===c.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===c.kind)e.data=e.data.toUpperCase();else if("startsWith"===c.kind)e.data.startsWith(c.value)||(C(o=this._getOrReturnCtx(e,o),{code:O.invalid_string,validation:{startsWith:c.value},message:c.message}),s.dirty());else if("endsWith"===c.kind)e.data.endsWith(c.value)||(C(o=this._getOrReturnCtx(e,o),{code:O.invalid_string,validation:{endsWith:c.value},message:c.message}),s.dirty());else if("datetime"===c.kind){((a=c).precision?a.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{".concat(a.precision,"}(([+-]\\d{2}(:?\\d{2})?)|Z)$")):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{".concat(a.precision,"}Z$")):0===a.precision?a.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):a.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$")).test(e.data)||(C(o=this._getOrReturnCtx(e,o),{code:O.invalid_string,validation:"datetime",message:c.message}),s.dirty())}else"ip"===c.kind?(n=e.data,("v4"!==(i=c.version)&&i||!X.test(n))&&("v6"!==i&&i||!ee.test(n))&&(C(o=this._getOrReturnCtx(e,o),{validation:"ip",code:O.invalid_string,message:c.message}),s.dirty())):w.assertNever(c)}}catch(p){u.e(p)}finally{u.f()}return{status:s.value,value:e.data}}},{key:"_regex",value:function(e,t,r){return this.refinement((function(t){return e.test(t)}),(0,x.Z)({validation:t,code:O.invalid_string},U.errToObj(r)))}},{key:"_addCheck",value:function(e){return new r((0,x.Z)((0,x.Z)({},this._def),{},{checks:[].concat((0,o.Z)(this._def.checks),[e])}))}},{key:"email",value:function(e){return this._addCheck((0,x.Z)({kind:"email"},U.errToObj(e)))}},{key:"url",value:function(e){return this._addCheck((0,x.Z)({kind:"url"},U.errToObj(e)))}},{key:"emoji",value:function(e){return this._addCheck((0,x.Z)({kind:"emoji"},U.errToObj(e)))}},{key:"uuid",value:function(e){return this._addCheck((0,x.Z)({kind:"uuid"},U.errToObj(e)))}},{key:"cuid",value:function(e){return this._addCheck((0,x.Z)({kind:"cuid"},U.errToObj(e)))}},{key:"cuid2",value:function(e){return this._addCheck((0,x.Z)({kind:"cuid2"},U.errToObj(e)))}},{key:"ulid",value:function(e){return this._addCheck((0,x.Z)({kind:"ulid"},U.errToObj(e)))}},{key:"ip",value:function(e){return this._addCheck((0,x.Z)({kind:"ip"},U.errToObj(e)))}},{key:"datetime",value:function(e){var t;return"string"===typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck((0,x.Z)({kind:"datetime",precision:"undefined"===typeof(null===e||void 0===e?void 0:e.precision)?null:null===e||void 0===e?void 0:e.precision,offset:null!==(t=null===e||void 0===e?void 0:e.offset)&&void 0!==t&&t},U.errToObj(null===e||void 0===e?void 0:e.message)))}},{key:"regex",value:function(e,t){return this._addCheck((0,x.Z)({kind:"regex",regex:e},U.errToObj(t)))}},{key:"includes",value:function(e,t){return this._addCheck((0,x.Z)({kind:"includes",value:e,position:null===t||void 0===t?void 0:t.position},U.errToObj(null===t||void 0===t?void 0:t.message)))}},{key:"startsWith",value:function(e,t){return this._addCheck((0,x.Z)({kind:"startsWith",value:e},U.errToObj(t)))}},{key:"endsWith",value:function(e,t){return this._addCheck((0,x.Z)({kind:"endsWith",value:e},U.errToObj(t)))}},{key:"min",value:function(e,t){return this._addCheck((0,x.Z)({kind:"min",value:e},U.errToObj(t)))}},{key:"max",value:function(e,t){return this._addCheck((0,x.Z)({kind:"max",value:e},U.errToObj(t)))}},{key:"length",value:function(e,t){return this._addCheck((0,x.Z)({kind:"length",value:e},U.errToObj(t)))}},{key:"nonempty",value:function(e){return this.min(1,U.errToObj(e))}},{key:"trim",value:function(){return new r((0,x.Z)((0,x.Z)({},this._def),{},{checks:[].concat((0,o.Z)(this._def.checks),[{kind:"trim"}])}))}},{key:"toLowerCase",value:function(){return new r((0,x.Z)((0,x.Z)({},this._def),{},{checks:[].concat((0,o.Z)(this._def.checks),[{kind:"toLowerCase"}])}))}},{key:"toUpperCase",value:function(){return new r((0,x.Z)((0,x.Z)({},this._def),{},{checks:[].concat((0,o.Z)(this._def.checks),[{kind:"toUpperCase"}])}))}},{key:"isDatetime",get:function(){return!!this._def.checks.find((function(e){return"datetime"===e.kind}))}},{key:"isEmail",get:function(){return!!this._def.checks.find((function(e){return"email"===e.kind}))}},{key:"isURL",get:function(){return!!this._def.checks.find((function(e){return"url"===e.kind}))}},{key:"isEmoji",get:function(){return!!this._def.checks.find((function(e){return"emoji"===e.kind}))}},{key:"isUUID",get:function(){return!!this._def.checks.find((function(e){return"uuid"===e.kind}))}},{key:"isCUID",get:function(){return!!this._def.checks.find((function(e){return"cuid"===e.kind}))}},{key:"isCUID2",get:function(){return!!this._def.checks.find((function(e){return"cuid2"===e.kind}))}},{key:"isULID",get:function(){return!!this._def.checks.find((function(e){return"ulid"===e.kind}))}},{key:"isIP",get:function(){return!!this._def.checks.find((function(e){return"ip"===e.kind}))}},{key:"minLength",get:function(){var e,t=null,r=(0,S.Z)(this._def.checks);try{for(r.s();!(e=r.n()).done;){var n=e.value;"min"===n.kind&&(null===t||n.value>t)&&(t=n.value)}}catch(i){r.e(i)}finally{r.f()}return t}},{key:"maxLength",get:function(){var e,t=null,r=(0,S.Z)(this._def.checks);try{for(r.s();!(e=r.n()).done;){var n=e.value;"max"===n.kind&&(null===t||n.value<t)&&(t=n.value)}}catch(i){r.e(i)}finally{r.f()}return t}}]),r}(J);function re(e,t){var r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,i=r>n?r:n;return parseInt(e.toFixed(i).replace(".",""))%parseInt(t.toFixed(i).replace(".",""))/Math.pow(10,i)}te.create=function(e){var t;return new te((0,x.Z)({checks:[],typeName:He.ZodString,coerce:null!==(t=null===e||void 0===e?void 0:e.coerce)&&void 0!==t&&t},K(e)))};var ne=function(e){h(r,e);var t=_(r);function r(){var e;return u(this,r),(e=t.apply(this,arguments)).min=e.gte,e.max=e.lte,e.step=e.multipleOf,e}return d(r,[{key:"_parse",value:function(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==T.number){var t=this._getOrReturnCtx(e);return C(t,{code:O.invalid_type,expected:T.number,received:t.parsedType}),M}var r,n=void 0,i=new N,a=(0,S.Z)(this._def.checks);try{for(a.s();!(r=a.n()).done;){var s=r.value;if("int"===s.kind)w.isInteger(e.data)||(C(n=this._getOrReturnCtx(e,n),{code:O.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty());else if("min"===s.kind){(s.inclusive?e.data<s.value:e.data<=s.value)&&(C(n=this._getOrReturnCtx(e,n),{code:O.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty())}else if("max"===s.kind){(s.inclusive?e.data>s.value:e.data>=s.value)&&(C(n=this._getOrReturnCtx(e,n),{code:O.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty())}else"multipleOf"===s.kind?0!==re(e.data,s.value)&&(C(n=this._getOrReturnCtx(e,n),{code:O.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):"finite"===s.kind?Number.isFinite(e.data)||(C(n=this._getOrReturnCtx(e,n),{code:O.not_finite,message:s.message}),i.dirty()):w.assertNever(s)}}catch(o){a.e(o)}finally{a.f()}return{status:i.value,value:e.data}}},{key:"gte",value:function(e,t){return this.setLimit("min",e,!0,U.toString(t))}},{key:"gt",value:function(e,t){return this.setLimit("min",e,!1,U.toString(t))}},{key:"lte",value:function(e,t){return this.setLimit("max",e,!0,U.toString(t))}},{key:"lt",value:function(e,t){return this.setLimit("max",e,!1,U.toString(t))}},{key:"setLimit",value:function(e,t,n,i){return new r((0,x.Z)((0,x.Z)({},this._def),{},{checks:[].concat((0,o.Z)(this._def.checks),[{kind:e,value:t,inclusive:n,message:U.toString(i)}])}))}},{key:"_addCheck",value:function(e){return new r((0,x.Z)((0,x.Z)({},this._def),{},{checks:[].concat((0,o.Z)(this._def.checks),[e])}))}},{key:"int",value:function(e){return this._addCheck({kind:"int",message:U.toString(e)})}},{key:"positive",value:function(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:U.toString(e)})}},{key:"negative",value:function(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:U.toString(e)})}},{key:"nonpositive",value:function(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:U.toString(e)})}},{key:"nonnegative",value:function(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:U.toString(e)})}},{key:"multipleOf",value:function(e,t){return this._addCheck({kind:"multipleOf",value:e,message:U.toString(t)})}},{key:"finite",value:function(e){return this._addCheck({kind:"finite",message:U.toString(e)})}},{key:"safe",value:function(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:U.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:U.toString(e)})}},{key:"minValue",get:function(){var e,t=null,r=(0,S.Z)(this._def.checks);try{for(r.s();!(e=r.n()).done;){var n=e.value;"min"===n.kind&&(null===t||n.value>t)&&(t=n.value)}}catch(i){r.e(i)}finally{r.f()}return t}},{key:"maxValue",get:function(){var e,t=null,r=(0,S.Z)(this._def.checks);try{for(r.s();!(e=r.n()).done;){var n=e.value;"max"===n.kind&&(null===t||n.value<t)&&(t=n.value)}}catch(i){r.e(i)}finally{r.f()}return t}},{key:"isInt",get:function(){return!!this._def.checks.find((function(e){return"int"===e.kind||"multipleOf"===e.kind&&w.isInteger(e.value)}))}},{key:"isFinite",get:function(){var e,t=null,r=null,n=(0,S.Z)(this._def.checks);try{for(n.s();!(e=n.n()).done;){var i=e.value;if("finite"===i.kind||"int"===i.kind||"multipleOf"===i.kind)return!0;"min"===i.kind?(null===r||i.value>r)&&(r=i.value):"max"===i.kind&&(null===t||i.value<t)&&(t=i.value)}}catch(a){n.e(a)}finally{n.f()}return Number.isFinite(r)&&Number.isFinite(t)}}]),r}(J);ne.create=function(e){return new ne((0,x.Z)({checks:[],typeName:He.ZodNumber,coerce:(null===e||void 0===e?void 0:e.coerce)||!1},K(e)))};var ie=function(e){h(r,e);var t=_(r);function r(){var e;return u(this,r),(e=t.apply(this,arguments)).min=e.gte,e.max=e.lte,e}return d(r,[{key:"_parse",value:function(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==T.bigint){var t=this._getOrReturnCtx(e);return C(t,{code:O.invalid_type,expected:T.bigint,received:t.parsedType}),M}var r,n=void 0,i=new N,a=(0,S.Z)(this._def.checks);try{for(a.s();!(r=a.n()).done;){var s=r.value;if("min"===s.kind)(s.inclusive?e.data<s.value:e.data<=s.value)&&(C(n=this._getOrReturnCtx(e,n),{code:O.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty());else if("max"===s.kind){(s.inclusive?e.data>s.value:e.data>=s.value)&&(C(n=this._getOrReturnCtx(e,n),{code:O.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty())}else"multipleOf"===s.kind?e.data%s.value!==BigInt(0)&&(C(n=this._getOrReturnCtx(e,n),{code:O.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):w.assertNever(s)}}catch(o){a.e(o)}finally{a.f()}return{status:i.value,value:e.data}}},{key:"gte",value:function(e,t){return this.setLimit("min",e,!0,U.toString(t))}},{key:"gt",value:function(e,t){return this.setLimit("min",e,!1,U.toString(t))}},{key:"lte",value:function(e,t){return this.setLimit("max",e,!0,U.toString(t))}},{key:"lt",value:function(e,t){return this.setLimit("max",e,!1,U.toString(t))}},{key:"setLimit",value:function(e,t,n,i){return new r((0,x.Z)((0,x.Z)({},this._def),{},{checks:[].concat((0,o.Z)(this._def.checks),[{kind:e,value:t,inclusive:n,message:U.toString(i)}])}))}},{key:"_addCheck",value:function(e){return new r((0,x.Z)((0,x.Z)({},this._def),{},{checks:[].concat((0,o.Z)(this._def.checks),[e])}))}},{key:"positive",value:function(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:U.toString(e)})}},{key:"negative",value:function(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:U.toString(e)})}},{key:"nonpositive",value:function(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:U.toString(e)})}},{key:"nonnegative",value:function(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:U.toString(e)})}},{key:"multipleOf",value:function(e,t){return this._addCheck({kind:"multipleOf",value:e,message:U.toString(t)})}},{key:"minValue",get:function(){var e,t=null,r=(0,S.Z)(this._def.checks);try{for(r.s();!(e=r.n()).done;){var n=e.value;"min"===n.kind&&(null===t||n.value>t)&&(t=n.value)}}catch(i){r.e(i)}finally{r.f()}return t}},{key:"maxValue",get:function(){var e,t=null,r=(0,S.Z)(this._def.checks);try{for(r.s();!(e=r.n()).done;){var n=e.value;"max"===n.kind&&(null===t||n.value<t)&&(t=n.value)}}catch(i){r.e(i)}finally{r.f()}return t}}]),r}(J);ie.create=function(e){var t;return new ie((0,x.Z)({checks:[],typeName:He.ZodBigInt,coerce:null!==(t=null===e||void 0===e?void 0:e.coerce)&&void 0!==t&&t},K(e)))};var ae=function(e){h(r,e);var t=_(r);function r(){return u(this,r),t.apply(this,arguments)}return d(r,[{key:"_parse",value:function(e){if(this._def.coerce&&(e.data=Boolean(e.data)),this._getType(e)!==T.boolean){var t=this._getOrReturnCtx(e);return C(t,{code:O.invalid_type,expected:T.boolean,received:t.parsedType}),M}return L(e.data)}}]),r}(J);ae.create=function(e){return new ae((0,x.Z)({typeName:He.ZodBoolean,coerce:(null===e||void 0===e?void 0:e.coerce)||!1},K(e)))};var se=function(e){h(r,e);var t=_(r);function r(){return u(this,r),t.apply(this,arguments)}return d(r,[{key:"_parse",value:function(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==T.date){var t=this._getOrReturnCtx(e);return C(t,{code:O.invalid_type,expected:T.date,received:t.parsedType}),M}if(isNaN(e.data.getTime()))return C(this._getOrReturnCtx(e),{code:O.invalid_date}),M;var r,n=new N,i=void 0,a=(0,S.Z)(this._def.checks);try{for(a.s();!(r=a.n()).done;){var s=r.value;"min"===s.kind?e.data.getTime()<s.value&&(C(i=this._getOrReturnCtx(e,i),{code:O.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),n.dirty()):"max"===s.kind?e.data.getTime()>s.value&&(C(i=this._getOrReturnCtx(e,i),{code:O.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),n.dirty()):w.assertNever(s)}}catch(o){a.e(o)}finally{a.f()}return{status:n.value,value:new Date(e.data.getTime())}}},{key:"_addCheck",value:function(e){return new r((0,x.Z)((0,x.Z)({},this._def),{},{checks:[].concat((0,o.Z)(this._def.checks),[e])}))}},{key:"min",value:function(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:U.toString(t)})}},{key:"max",value:function(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:U.toString(t)})}},{key:"minDate",get:function(){var e,t=null,r=(0,S.Z)(this._def.checks);try{for(r.s();!(e=r.n()).done;){var n=e.value;"min"===n.kind&&(null===t||n.value>t)&&(t=n.value)}}catch(i){r.e(i)}finally{r.f()}return null!=t?new Date(t):null}},{key:"maxDate",get:function(){var e,t=null,r=(0,S.Z)(this._def.checks);try{for(r.s();!(e=r.n()).done;){var n=e.value;"max"===n.kind&&(null===t||n.value<t)&&(t=n.value)}}catch(i){r.e(i)}finally{r.f()}return null!=t?new Date(t):null}}]),r}(J);se.create=function(e){return new se((0,x.Z)({checks:[],coerce:(null===e||void 0===e?void 0:e.coerce)||!1,typeName:He.ZodDate},K(e)))};var oe=function(e){h(r,e);var t=_(r);function r(){return u(this,r),t.apply(this,arguments)}return d(r,[{key:"_parse",value:function(e){if(this._getType(e)!==T.symbol){var t=this._getOrReturnCtx(e);return C(t,{code:O.invalid_type,expected:T.symbol,received:t.parsedType}),M}return L(e.data)}}]),r}(J);oe.create=function(e){return new oe((0,x.Z)({typeName:He.ZodSymbol},K(e)))};var ue=function(e){h(r,e);var t=_(r);function r(){return u(this,r),t.apply(this,arguments)}return d(r,[{key:"_parse",value:function(e){if(this._getType(e)!==T.undefined){var t=this._getOrReturnCtx(e);return C(t,{code:O.invalid_type,expected:T.undefined,received:t.parsedType}),M}return L(e.data)}}]),r}(J);ue.create=function(e){return new ue((0,x.Z)({typeName:He.ZodUndefined},K(e)))};var ce=function(e){h(r,e);var t=_(r);function r(){return u(this,r),t.apply(this,arguments)}return d(r,[{key:"_parse",value:function(e){if(this._getType(e)!==T.null){var t=this._getOrReturnCtx(e);return C(t,{code:O.invalid_type,expected:T.null,received:t.parsedType}),M}return L(e.data)}}]),r}(J);ce.create=function(e){return new ce((0,x.Z)({typeName:He.ZodNull},K(e)))};var le=function(e){h(r,e);var t=_(r);function r(){var e;return u(this,r),(e=t.apply(this,arguments))._any=!0,e}return d(r,[{key:"_parse",value:function(e){return L(e.data)}}]),r}(J);le.create=function(e){return new le((0,x.Z)({typeName:He.ZodAny},K(e)))};var de=function(e){h(r,e);var t=_(r);function r(){var e;return u(this,r),(e=t.apply(this,arguments))._unknown=!0,e}return d(r,[{key:"_parse",value:function(e){return L(e.data)}}]),r}(J);de.create=function(e){return new de((0,x.Z)({typeName:He.ZodUnknown},K(e)))};var fe=function(e){h(r,e);var t=_(r);function r(){return u(this,r),t.apply(this,arguments)}return d(r,[{key:"_parse",value:function(e){var t=this._getOrReturnCtx(e);return C(t,{code:O.invalid_type,expected:T.never,received:t.parsedType}),M}}]),r}(J);fe.create=function(e){return new fe((0,x.Z)({typeName:He.ZodNever},K(e)))};var pe=function(e){h(r,e);var t=_(r);function r(){return u(this,r),t.apply(this,arguments)}return d(r,[{key:"_parse",value:function(e){if(this._getType(e)!==T.undefined){var t=this._getOrReturnCtx(e);return C(t,{code:O.invalid_type,expected:T.void,received:t.parsedType}),M}return L(e.data)}}]),r}(J);pe.create=function(e){return new pe((0,x.Z)({typeName:He.ZodVoid},K(e)))};var he=function(e){h(r,e);var t=_(r);function r(){return u(this,r),t.apply(this,arguments)}return d(r,[{key:"_parse",value:function(e){var t=this._processInputParams(e),r=t.ctx,n=t.status,i=this._def;if(r.parsedType!==T.array)return C(r,{code:O.invalid_type,expected:T.array,received:r.parsedType}),M;if(null!==i.exactLength){var a=r.data.length>i.exactLength.value,s=r.data.length<i.exactLength.value;(a||s)&&(C(r,{code:a?O.too_big:O.too_small,minimum:s?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(null!==i.minLength&&r.data.length<i.minLength.value&&(C(r,{code:O.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),null!==i.maxLength&&r.data.length>i.maxLength.value&&(C(r,{code:O.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all((0,o.Z)(r.data).map((function(e,t){return i.type._parseAsync(new H(r,e,r.path,t))}))).then((function(e){return N.mergeArray(n,e)}));var u=(0,o.Z)(r.data).map((function(e,t){return i.type._parseSync(new H(r,e,r.path,t))}));return N.mergeArray(n,u)}},{key:"element",get:function(){return this._def.type}},{key:"min",value:function(e,t){return new r((0,x.Z)((0,x.Z)({},this._def),{},{minLength:{value:e,message:U.toString(t)}}))}},{key:"max",value:function(e,t){return new r((0,x.Z)((0,x.Z)({},this._def),{},{maxLength:{value:e,message:U.toString(t)}}))}},{key:"length",value:function(e,t){return new r((0,x.Z)((0,x.Z)({},this._def),{},{exactLength:{value:e,message:U.toString(t)}}))}},{key:"nonempty",value:function(e){return this.min(1,e)}}]),r}(J);function ve(e){if(e instanceof ge){var t={};for(var r in e.shape){var n=e.shape[r];t[r]=Ue.create(ve(n))}return new ge((0,x.Z)((0,x.Z)({},e._def),{},{shape:function(){return t}}))}return e instanceof he?new he((0,x.Z)((0,x.Z)({},e._def),{},{type:ve(e.element)})):e instanceof Ue?Ue.create(ve(e.unwrap())):e instanceof Ne?Ne.create(ve(e.unwrap())):e instanceof be?be.create(e.items.map((function(e){return ve(e)}))):e}he.create=function(e,t){return new he((0,x.Z)({type:e,minLength:null,maxLength:null,exactLength:null,typeName:He.ZodArray},K(t)))};var ge=function(e){h(r,e);var t=_(r);function r(){var e;return u(this,r),(e=t.apply(this,arguments))._cached=null,e.nonstrict=e.passthrough,e.augment=e.extend,e}return d(r,[{key:"_getCached",value:function(){if(null!==this._cached)return this._cached;var e=this._def.shape(),t=w.objectKeys(e);return this._cached={shape:e,keys:t}}},{key:"_parse",value:function(e){if(this._getType(e)!==T.object){var t=this._getOrReturnCtx(e);return C(t,{code:O.invalid_type,expected:T.object,received:t.parsedType}),M}var r=this._processInputParams(e),n=r.status,i=r.ctx,o=this._getCached(),u=o.shape,c=o.keys,l=[];if(!(this._def.catchall instanceof fe&&"strip"===this._def.unknownKeys))for(var d in i.data)c.includes(d)||l.push(d);var f,p=[],h=(0,S.Z)(c);try{for(h.s();!(f=h.n()).done;){var v=f.value,g=u[v],y=i.data[v];p.push({key:{status:"valid",value:v},value:g._parse(new H(i,y,i.path,v)),alwaysSet:v in i.data})}}catch(I){h.e(I)}finally{h.f()}if(this._def.catchall instanceof fe){var _=this._def.unknownKeys;if("passthrough"===_){var m,k=(0,S.Z)(l);try{for(k.s();!(m=k.n()).done;){var w=m.value;p.push({key:{status:"valid",value:w},value:{status:"valid",value:i.data[w]}})}}catch(I){k.e(I)}finally{k.f()}}else if("strict"===_)l.length>0&&(C(i,{code:O.unrecognized_keys,keys:l}),n.dirty());else if("strip"!==_)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{var b,x=this._def.catchall,Z=(0,S.Z)(l);try{for(Z.s();!(b=Z.n()).done;){var E=b.value,P=i.data[E];p.push({key:{status:"valid",value:E},value:x._parse(new H(i,P,i.path,E)),alwaysSet:E in i.data})}}catch(I){Z.e(I)}finally{Z.f()}}return i.common.async?Promise.resolve().then((0,s.Z)((0,a.Z)().mark((function e(){var t,r,n,i,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],r=(0,S.Z)(p),e.prev=2,r.s();case 4:if((n=r.n()).done){e.next=19;break}return i=n.value,e.next=8,i.key;case 8:return s=e.sent,e.t0=t,e.t1=s,e.next=13,i.value;case 13:e.t2=e.sent,e.t3=i.alwaysSet,e.t4={key:e.t1,value:e.t2,alwaysSet:e.t3},e.t0.push.call(e.t0,e.t4);case 17:e.next=4;break;case 19:e.next=24;break;case 21:e.prev=21,e.t5=e.catch(2),r.e(e.t5);case 24:return e.prev=24,r.f(),e.finish(24);case 27:return e.abrupt("return",t);case 28:case"end":return e.stop()}}),e,null,[[2,21,24,27]])})))).then((function(e){return N.mergeObjectSync(n,e)})):N.mergeObjectSync(n,p)}},{key:"shape",get:function(){return this._def.shape()}},{key:"strict",value:function(e){var t=this;return U.errToObj,new r((0,x.Z)((0,x.Z)({},this._def),{},{unknownKeys:"strict"},void 0!==e?{errorMap:function(r,n){var i,a,s,o,u=null!==(s=null===(a=(i=t._def).errorMap)||void 0===a?void 0:a.call(i,r,n).message)&&void 0!==s?s:n.defaultError;return"unrecognized_keys"===r.code?{message:null!==(o=U.errToObj(e).message)&&void 0!==o?o:u}:{message:u}}}:{}))}},{key:"strip",value:function(){return new r((0,x.Z)((0,x.Z)({},this._def),{},{unknownKeys:"strip"}))}},{key:"passthrough",value:function(){return new r((0,x.Z)((0,x.Z)({},this._def),{},{unknownKeys:"passthrough"}))}},{key:"extend",value:function(e){var t=this;return new r((0,x.Z)((0,x.Z)({},this._def),{},{shape:function(){return(0,x.Z)((0,x.Z)({},t._def.shape()),e)}}))}},{key:"merge",value:function(e){var t=this;return new r({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:function(){return(0,x.Z)((0,x.Z)({},t._def.shape()),e._def.shape())},typeName:He.ZodObject})}},{key:"setKey",value:function(e,t){return this.augment((0,i.Z)({},e,t))}},{key:"catchall",value:function(e){return new r((0,x.Z)((0,x.Z)({},this._def),{},{catchall:e}))}},{key:"pick",value:function(e){var t=this,n={};return w.objectKeys(e).forEach((function(r){e[r]&&t.shape[r]&&(n[r]=t.shape[r])})),new r((0,x.Z)((0,x.Z)({},this._def),{},{shape:function(){return n}}))}},{key:"omit",value:function(e){var t=this,n={};return w.objectKeys(this.shape).forEach((function(r){e[r]||(n[r]=t.shape[r])})),new r((0,x.Z)((0,x.Z)({},this._def),{},{shape:function(){return n}}))}},{key:"deepPartial",value:function(){return ve(this)}},{key:"partial",value:function(e){var t=this,n={};return w.objectKeys(this.shape).forEach((function(r){var i=t.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()})),new r((0,x.Z)((0,x.Z)({},this._def),{},{shape:function(){return n}}))}},{key:"required",value:function(e){var t=this,n={};return w.objectKeys(this.shape).forEach((function(r){if(e&&!e[r])n[r]=t.shape[r];else{for(var i=t.shape[r];i instanceof Ue;)i=i._def.innerType;n[r]=i}})),new r((0,x.Z)((0,x.Z)({},this._def),{},{shape:function(){return n}}))}},{key:"keyof",value:function(){return Pe(w.objectKeys(this.shape))}}]),r}(J);ge.create=function(e,t){return new ge((0,x.Z)({shape:function(){return e},unknownKeys:"strip",catchall:fe.create(),typeName:He.ZodObject},K(t)))},ge.strictCreate=function(e,t){return new ge((0,x.Z)({shape:function(){return e},unknownKeys:"strict",catchall:fe.create(),typeName:He.ZodObject},K(t)))},ge.lazycreate=function(e,t){return new ge((0,x.Z)({shape:e,unknownKeys:"strip",catchall:fe.create(),typeName:He.ZodObject},K(t)))};var ye=function(e){h(r,e);var t=_(r);function r(){return u(this,r),t.apply(this,arguments)}return d(r,[{key:"_parse",value:function(e){var t=this._processInputParams(e).ctx,r=this._def.options;if(t.common.async)return Promise.all(r.map(function(){var e=(0,s.Z)((0,a.Z)().mark((function e(r){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,x.Z)((0,x.Z)({},t),{},{common:(0,x.Z)((0,x.Z)({},t.common),{},{issues:[]}),parent:null}),e.next=3,r._parseAsync({data:t.data,path:t.path,parent:n});case 3:return e.t0=e.sent,e.t1=n,e.abrupt("return",{result:e.t0,ctx:e.t1});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).then((function(e){var r,n=(0,S.Z)(e);try{for(n.s();!(r=n.n()).done;){var i=r.value;if("valid"===i.result.status)return i.result}}catch(d){n.e(d)}finally{n.f()}var a,s=(0,S.Z)(e);try{for(s.s();!(a=s.n()).done;){var u,c=a.value;if("dirty"===c.result.status)return(u=t.common.issues).push.apply(u,(0,o.Z)(c.ctx.common.issues)),c.result}}catch(d){s.e(d)}finally{s.f()}var l=e.map((function(e){return new E(e.ctx.common.issues)}));return C(t,{code:O.invalid_union,unionErrors:l}),M}));var n,i,u=void 0,c=[],l=(0,S.Z)(r);try{for(l.s();!(n=l.n()).done;){var d=n.value,f=(0,x.Z)((0,x.Z)({},t),{},{common:(0,x.Z)((0,x.Z)({},t.common),{},{issues:[]}),parent:null}),p=d._parseSync({data:t.data,path:t.path,parent:f});if("valid"===p.status)return p;"dirty"!==p.status||u||(u={result:p,ctx:f}),f.common.issues.length&&c.push(f.common.issues)}}catch(v){l.e(v)}finally{l.f()}if(u)return(i=t.common.issues).push.apply(i,(0,o.Z)(u.ctx.common.issues)),u.result;var h=c.map((function(e){return new E(e)}));return C(t,{code:O.invalid_union,unionErrors:h}),M}},{key:"options",get:function(){return this._def.options}}]),r}(J);ye.create=function(e,t){return new ye((0,x.Z)({options:e,typeName:He.ZodUnion},K(t)))};var _e=function e(t){return t instanceof Oe?e(t.schema):t instanceof Ce?e(t.innerType()):t instanceof Ee?[t.value]:t instanceof Ie?t.options:t instanceof je?Object.keys(t.enum):t instanceof Me?e(t._def.innerType):t instanceof ue?[void 0]:t instanceof ce?[null]:null},me=function(e){h(r,e);var t=_(r);function r(){return u(this,r),t.apply(this,arguments)}return d(r,[{key:"_parse",value:function(e){var t=this._processInputParams(e).ctx;if(t.parsedType!==T.object)return C(t,{code:O.invalid_type,expected:T.object,received:t.parsedType}),M;var r=this.discriminator,n=t.data[r],i=this.optionsMap.get(n);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(C(t,{code:O.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),M)}},{key:"discriminator",get:function(){return this._def.discriminator}},{key:"options",get:function(){return this._def.options}},{key:"optionsMap",get:function(){return this._def.optionsMap}}],[{key:"create",value:function(e,t,n){var i,a=new Map,s=(0,S.Z)(t);try{for(s.s();!(i=s.n()).done;){var o=i.value,u=_e(o.shape[e]);if(!u)throw new Error("A discriminator value for key `".concat(e,"` could not be extracted from all schema options"));var c,l=(0,S.Z)(u);try{for(l.s();!(c=l.n()).done;){var d=c.value;if(a.has(d))throw new Error("Discriminator property ".concat(String(e)," has duplicate value ").concat(String(d)));a.set(d,o)}}catch(f){l.e(f)}finally{l.f()}}}catch(f){s.e(f)}finally{s.f()}return new r((0,x.Z)({typeName:He.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:a},K(n)))}}]),r}(J);function ke(e,t){var r=Z(e),n=Z(t);if(e===t)return{valid:!0,data:e};if(r===T.object&&n===T.object){var i,a=w.objectKeys(t),s=w.objectKeys(e).filter((function(e){return-1!==a.indexOf(e)})),o=(0,x.Z)((0,x.Z)({},e),t),u=(0,S.Z)(s);try{for(u.s();!(i=u.n()).done;){var c=i.value,l=ke(e[c],t[c]);if(!l.valid)return{valid:!1};o[c]=l.data}}catch(h){u.e(h)}finally{u.f()}return{valid:!0,data:o}}if(r===T.array&&n===T.array){if(e.length!==t.length)return{valid:!1};for(var d=[],f=0;f<e.length;f++){var p=ke(e[f],t[f]);if(!p.valid)return{valid:!1};d.push(p.data)}return{valid:!0,data:d}}return r===T.date&&n===T.date&&+e===+t?{valid:!0,data:e}:{valid:!1}}var we=function(e){h(r,e);var t=_(r);function r(){return u(this,r),t.apply(this,arguments)}return d(r,[{key:"_parse",value:function(e){var t=this._processInputParams(e),r=t.status,i=t.ctx,a=function(e,t){if(q(e)||q(t))return M;var n=ke(e.value,t.value);return n.valid?((D(e)||D(t))&&r.dirty(),{status:r.value,value:n.data}):(C(i,{code:O.invalid_intersection_types}),M)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then((function(e){var t=(0,n.Z)(e,2),r=t[0],i=t[1];return a(r,i)})):a(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}]),r}(J);we.create=function(e,t,r){return new we((0,x.Z)({left:e,right:t,typeName:He.ZodIntersection},K(r)))};var be=function(e){h(r,e);var t=_(r);function r(){return u(this,r),t.apply(this,arguments)}return d(r,[{key:"_parse",value:function(e){var t=this,r=this._processInputParams(e),n=r.status,i=r.ctx;if(i.parsedType!==T.array)return C(i,{code:O.invalid_type,expected:T.array,received:i.parsedType}),M;if(i.data.length<this._def.items.length)return C(i,{code:O.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),M;!this._def.rest&&i.data.length>this._def.items.length&&(C(i,{code:O.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());var a=(0,o.Z)(i.data).map((function(e,r){var n=t._def.items[r]||t._def.rest;return n?n._parse(new H(i,e,i.path,r)):null})).filter((function(e){return!!e}));return i.common.async?Promise.all(a).then((function(e){return N.mergeArray(n,e)})):N.mergeArray(n,a)}},{key:"items",get:function(){return this._def.items}},{key:"rest",value:function(e){return new r((0,x.Z)((0,x.Z)({},this._def),{},{rest:e}))}}]),r}(J);be.create=function(e,t){if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new be((0,x.Z)({items:e,typeName:He.ZodTuple,rest:null},K(t)))};var xe=function(e){h(r,e);var t=_(r);function r(){return u(this,r),t.apply(this,arguments)}return d(r,[{key:"keySchema",get:function(){return this._def.keyType}},{key:"valueSchema",get:function(){return this._def.valueType}},{key:"_parse",value:function(e){var t=this._processInputParams(e),r=t.status,n=t.ctx;if(n.parsedType!==T.object)return C(n,{code:O.invalid_type,expected:T.object,received:n.parsedType}),M;var i=[],a=this._def.keyType,s=this._def.valueType;for(var o in n.data)i.push({key:a._parse(new H(n,o,n.path,o)),value:s._parse(new H(n,n.data[o],n.path,o))});return n.common.async?N.mergeObjectAsync(r,i):N.mergeObjectSync(r,i)}},{key:"element",get:function(){return this._def.valueType}}],[{key:"create",value:function(e,t,n){return new r(t instanceof J?(0,x.Z)({keyType:e,valueType:t,typeName:He.ZodRecord},K(n)):(0,x.Z)({keyType:te.create(),valueType:e,typeName:He.ZodRecord},K(t)))}}]),r}(J),Se=function(e){h(r,e);var t=_(r);function r(){return u(this,r),t.apply(this,arguments)}return d(r,[{key:"keySchema",get:function(){return this._def.keyType}},{key:"valueSchema",get:function(){return this._def.valueType}},{key:"_parse",value:function(e){var t=this._processInputParams(e),r=t.status,i=t.ctx;if(i.parsedType!==T.map)return C(i,{code:O.invalid_type,expected:T.map,received:i.parsedType}),M;var u=this._def.keyType,c=this._def.valueType,l=(0,o.Z)(i.data.entries()).map((function(e,t){var r=(0,n.Z)(e,2),a=r[0],s=r[1];return{key:u._parse(new H(i,a,i.path,[t,"key"])),value:c._parse(new H(i,s,i.path,[t,"value"]))}}));if(i.common.async){var d=new Map;return Promise.resolve().then((0,s.Z)((0,a.Z)().mark((function e(){var t,n,i,s,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,S.Z)(l),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=17;break}return i=n.value,e.next=7,i.key;case 7:return s=e.sent,e.next=10,i.value;case 10:if(o=e.sent,"aborted"!==s.status&&"aborted"!==o.status){e.next=13;break}return e.abrupt("return",M);case 13:"dirty"!==s.status&&"dirty"!==o.status||r.dirty(),d.set(s.value,o.value);case 15:e.next=3;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(1),t.e(e.t0);case 22:return e.prev=22,t.f(),e.finish(22);case 25:return e.abrupt("return",{status:r.value,value:d});case 26:case"end":return e.stop()}}),e,null,[[1,19,22,25]])}))))}var f,p=new Map,h=(0,S.Z)(l);try{for(h.s();!(f=h.n()).done;){var v=f.value,g=v.key,y=v.value;if("aborted"===g.status||"aborted"===y.status)return M;"dirty"!==g.status&&"dirty"!==y.status||r.dirty(),p.set(g.value,y.value)}}catch(_){h.e(_)}finally{h.f()}return{status:r.value,value:p}}}]),r}(J);Se.create=function(e,t,r){return new Se((0,x.Z)({valueType:t,keyType:e,typeName:He.ZodMap},K(r)))};var Te=function(e){h(r,e);var t=_(r);function r(){return u(this,r),t.apply(this,arguments)}return d(r,[{key:"_parse",value:function(e){var t=this._processInputParams(e),r=t.status,n=t.ctx;if(n.parsedType!==T.set)return C(n,{code:O.invalid_type,expected:T.set,received:n.parsedType}),M;var i=this._def;null!==i.minSize&&n.data.size<i.minSize.value&&(C(n,{code:O.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),null!==i.maxSize&&n.data.size>i.maxSize.value&&(C(n,{code:O.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());var a=this._def.valueType;function s(e){var t,n=new Set,i=(0,S.Z)(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if("aborted"===a.status)return M;"dirty"===a.status&&r.dirty(),n.add(a.value)}}catch(s){i.e(s)}finally{i.f()}return{status:r.value,value:n}}var u=(0,o.Z)(n.data.values()).map((function(e,t){return a._parse(new H(n,e,n.path,t))}));return n.common.async?Promise.all(u).then((function(e){return s(e)})):s(u)}},{key:"min",value:function(e,t){return new r((0,x.Z)((0,x.Z)({},this._def),{},{minSize:{value:e,message:U.toString(t)}}))}},{key:"max",value:function(e,t){return new r((0,x.Z)((0,x.Z)({},this._def),{},{maxSize:{value:e,message:U.toString(t)}}))}},{key:"size",value:function(e,t){return this.min(e,t).max(e,t)}},{key:"nonempty",value:function(e){return this.min(1,e)}}]),r}(J);Te.create=function(e,t){return new Te((0,x.Z)({valueType:e,minSize:null,maxSize:null,typeName:He.ZodSet},K(t)))};var Ze=function(e){h(r,e);var t=_(r);function r(){var e;return u(this,r),(e=t.apply(this,arguments)).validate=e.implement,e}return d(r,[{key:"_parse",value:function(e){var t=this._processInputParams(e).ctx;if(t.parsedType!==T.function)return C(t,{code:O.invalid_type,expected:T.function,received:t.parsedType}),M;function r(e,r){return R({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,j(),P].filter((function(e){return!!e})),issueData:{code:O.invalid_arguments,argumentsError:r}})}function n(e,r){return R({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,j(),P].filter((function(e){return!!e})),issueData:{code:O.invalid_return_type,returnTypeError:r}})}var i={errorMap:t.common.contextualErrorMap},o=t.data;if(this._def.returns instanceof Re){var u=this;return L((0,s.Z)((0,a.Z)().mark((function e(){var t,s,c,l,d,f,p,h=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=h.length,s=new Array(t),c=0;c<t;c++)s[c]=h[c];return l=new E([]),e.next=4,u._def.args.parseAsync(s,i).catch((function(e){throw l.addIssue(r(s,e)),l}));case 4:return d=e.sent,e.next=7,Reflect.apply(o,this,d);case 7:return f=e.sent,e.next=10,u._def.returns._def.type.parseAsync(f,i).catch((function(e){throw l.addIssue(n(f,e)),l}));case 10:return p=e.sent,e.abrupt("return",p);case 12:case"end":return e.stop()}}),e,this)}))))}var c=this;return L((function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var s=c._def.args.safeParse(t,i);if(!s.success)throw new E([r(t,s.error)]);var u=Reflect.apply(o,this,s.data),l=c._def.returns.safeParse(u,i);if(!l.success)throw new E([n(u,l.error)]);return l.data}))}},{key:"parameters",value:function(){return this._def.args}},{key:"returnType",value:function(){return this._def.returns}},{key:"args",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new r((0,x.Z)((0,x.Z)({},this._def),{},{args:be.create(t).rest(de.create())}))}},{key:"returns",value:function(e){return new r((0,x.Z)((0,x.Z)({},this._def),{},{returns:e}))}},{key:"implement",value:function(e){return this.parse(e)}},{key:"strictImplement",value:function(e){return this.parse(e)}}],[{key:"create",value:function(e,t,n){return new r((0,x.Z)({args:e||be.create([]).rest(de.create()),returns:t||de.create(),typeName:He.ZodFunction},K(n)))}}]),r}(J),Oe=function(e){h(r,e);var t=_(r);function r(){return u(this,r),t.apply(this,arguments)}return d(r,[{key:"schema",get:function(){return this._def.getter()}},{key:"_parse",value:function(e){var t=this._processInputParams(e).ctx;return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}]),r}(J);Oe.create=function(e,t){return new Oe((0,x.Z)({getter:e,typeName:He.ZodLazy},K(t)))};var Ee=function(e){h(r,e);var t=_(r);function r(){return u(this,r),t.apply(this,arguments)}return d(r,[{key:"_parse",value:function(e){if(e.data!==this._def.value){var t=this._getOrReturnCtx(e);return C(t,{received:t.data,code:O.invalid_literal,expected:this._def.value}),M}return{status:"valid",value:e.data}}},{key:"value",get:function(){return this._def.value}}]),r}(J);function Pe(e,t){return new Ie((0,x.Z)({values:e,typeName:He.ZodEnum},K(t)))}Ee.create=function(e,t){return new Ee((0,x.Z)({value:e,typeName:He.ZodLiteral},K(t)))};var Ie=function(e){h(r,e);var t=_(r);function r(){return u(this,r),t.apply(this,arguments)}return d(r,[{key:"_parse",value:function(e){if("string"!==typeof e.data){var t=this._getOrReturnCtx(e),r=this._def.values;return C(t,{expected:w.joinValues(r),received:t.parsedType,code:O.invalid_type}),M}if(-1===this._def.values.indexOf(e.data)){var n=this._getOrReturnCtx(e),i=this._def.values;return C(n,{received:n.data,code:O.invalid_enum_value,options:i}),M}return L(e.data)}},{key:"options",get:function(){return this._def.values}},{key:"enum",get:function(){var e,t={},r=(0,S.Z)(this._def.values);try{for(r.s();!(e=r.n()).done;){var n=e.value;t[n]=n}}catch(i){r.e(i)}finally{r.f()}return t}},{key:"Values",get:function(){var e,t={},r=(0,S.Z)(this._def.values);try{for(r.s();!(e=r.n()).done;){var n=e.value;t[n]=n}}catch(i){r.e(i)}finally{r.f()}return t}},{key:"Enum",get:function(){var e,t={},r=(0,S.Z)(this._def.values);try{for(r.s();!(e=r.n()).done;){var n=e.value;t[n]=n}}catch(i){r.e(i)}finally{r.f()}return t}},{key:"extract",value:function(e){return r.create(e)}},{key:"exclude",value:function(e){return r.create(this.options.filter((function(t){return!e.includes(t)})))}}]),r}(J);Ie.create=Pe;var je=function(e){h(r,e);var t=_(r);function r(){return u(this,r),t.apply(this,arguments)}return d(r,[{key:"_parse",value:function(e){var t=w.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==T.string&&r.parsedType!==T.number){var n=w.objectValues(t);return C(r,{expected:w.joinValues(n),received:r.parsedType,code:O.invalid_type}),M}if(-1===t.indexOf(e.data)){var i=w.objectValues(t);return C(r,{received:r.data,code:O.invalid_enum_value,options:i}),M}return L(e.data)}},{key:"enum",get:function(){return this._def.values}}]),r}(J);je.create=function(e,t){return new je((0,x.Z)({values:e,typeName:He.ZodNativeEnum},K(t)))};var Re=function(e){h(r,e);var t=_(r);function r(){return u(this,r),t.apply(this,arguments)}return d(r,[{key:"unwrap",value:function(){return this._def.type}},{key:"_parse",value:function(e){var t=this,r=this._processInputParams(e).ctx;if(r.parsedType!==T.promise&&!1===r.common.async)return C(r,{code:O.invalid_type,expected:T.promise,received:r.parsedType}),M;var n=r.parsedType===T.promise?r.data:Promise.resolve(r.data);return L(n.then((function(e){return t._def.type.parseAsync(e,{path:r.path,errorMap:r.common.contextualErrorMap})})))}}]),r}(J);Re.create=function(e,t){return new Re((0,x.Z)({type:e,typeName:He.ZodPromise},K(t)))};var Ce=function(e){h(r,e);var t=_(r);function r(){return u(this,r),t.apply(this,arguments)}return d(r,[{key:"innerType",value:function(){return this._def.schema}},{key:"sourceType",value:function(){return this._def.schema._def.typeName===He.ZodEffects?this._def.schema.sourceType():this._def.schema}},{key:"_parse",value:function(e){var t=this,r=this._processInputParams(e),n=r.status,i=r.ctx,a=this._def.effect||null,s={addIssue:function(e){C(i,e),e.fatal?n.abort():n.dirty()},get path(){return i.path}};if(s.addIssue=s.addIssue.bind(s),"preprocess"===a.type){var o=a.transform(i.data,s);return i.common.issues.length?{status:"dirty",value:i.data}:i.common.async?Promise.resolve(o).then((function(e){return t._def.schema._parseAsync({data:e,path:i.path,parent:i})})):this._def.schema._parseSync({data:o,path:i.path,parent:i})}if("refinement"===a.type){var u=function(e){var t=a.refinement(e,s);if(i.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===i.common.async){var c=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return"aborted"===c.status?M:("dirty"===c.status&&n.dirty(),u(c.value),{status:n.value,value:c.value})}return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then((function(e){return"aborted"===e.status?M:("dirty"===e.status&&n.dirty(),u(e.value).then((function(){return{status:n.value,value:e.value}})))}))}if("transform"===a.type){if(!1===i.common.async){var l=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!W(l))return l;var d=a.transform(l.value,s);if(d instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:d}}return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then((function(e){return W(e)?Promise.resolve(a.transform(e.value,s)).then((function(e){return{status:n.value,value:e}})):e}))}w.assertNever(a)}}]),r}(J);Ce.create=function(e,t,r){return new Ce((0,x.Z)({schema:e,typeName:He.ZodEffects,effect:t},K(r)))},Ce.createWithPreprocess=function(e,t,r){return new Ce((0,x.Z)({schema:t,effect:{type:"preprocess",transform:e},typeName:He.ZodEffects},K(r)))};var Ue=function(e){h(r,e);var t=_(r);function r(){return u(this,r),t.apply(this,arguments)}return d(r,[{key:"_parse",value:function(e){return this._getType(e)===T.undefined?L(void 0):this._def.innerType._parse(e)}},{key:"unwrap",value:function(){return this._def.innerType}}]),r}(J);Ue.create=function(e,t){return new Ue((0,x.Z)({innerType:e,typeName:He.ZodOptional},K(t)))};var Ne=function(e){h(r,e);var t=_(r);function r(){return u(this,r),t.apply(this,arguments)}return d(r,[{key:"_parse",value:function(e){return this._getType(e)===T.null?L(null):this._def.innerType._parse(e)}},{key:"unwrap",value:function(){return this._def.innerType}}]),r}(J);Ne.create=function(e,t){return new Ne((0,x.Z)({innerType:e,typeName:He.ZodNullable},K(t)))};var Me=function(e){h(r,e);var t=_(r);function r(){return u(this,r),t.apply(this,arguments)}return d(r,[{key:"_parse",value:function(e){var t=this._processInputParams(e).ctx,r=t.data;return t.parsedType===T.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}},{key:"removeDefault",value:function(){return this._def.innerType}}]),r}(J);Me.create=function(e,t){return new Me((0,x.Z)({innerType:e,typeName:He.ZodDefault,defaultValue:"function"===typeof t.default?t.default:function(){return t.default}},K(t)))};var Ae=function(e){h(r,e);var t=_(r);function r(){return u(this,r),t.apply(this,arguments)}return d(r,[{key:"_parse",value:function(e){var t=this,r=this._processInputParams(e).ctx,n=(0,x.Z)((0,x.Z)({},r),{},{common:(0,x.Z)((0,x.Z)({},r.common),{},{issues:[]})}),i=this._def.innerType._parse({data:n.data,path:n.path,parent:(0,x.Z)({},n)});return F(i)?i.then((function(e){return{status:"valid",value:"valid"===e.status?e.value:t._def.catchValue({get error(){return new E(n.common.issues)},input:n.data})}})):{status:"valid",value:"valid"===i.status?i.value:this._def.catchValue({get error(){return new E(n.common.issues)},input:n.data})}}},{key:"removeCatch",value:function(){return this._def.innerType}}]),r}(J);Ae.create=function(e,t){return new Ae((0,x.Z)({innerType:e,typeName:He.ZodCatch,catchValue:"function"===typeof t.catch?t.catch:function(){return t.catch}},K(t)))};var Le=function(e){h(r,e);var t=_(r);function r(){return u(this,r),t.apply(this,arguments)}return d(r,[{key:"_parse",value:function(e){if(this._getType(e)!==T.nan){var t=this._getOrReturnCtx(e);return C(t,{code:O.invalid_type,expected:T.nan,received:t.parsedType}),M}return{status:"valid",value:e.data}}}]),r}(J);Le.create=function(e){return new Le((0,x.Z)({typeName:He.ZodNaN},K(e)))};var qe=Symbol("zod_brand"),De=function(e){h(r,e);var t=_(r);function r(){return u(this,r),t.apply(this,arguments)}return d(r,[{key:"_parse",value:function(e){var t=this._processInputParams(e).ctx,r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}},{key:"unwrap",value:function(){return this._def.type}}]),r}(J),We=function(e){h(r,e);var t=_(r);function r(){return u(this,r),t.apply(this,arguments)}return d(r,[{key:"_parse",value:function(e){var t=this,r=this._processInputParams(e),n=r.status,i=r.ctx;if(i.common.async){var o=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._def.in._parseAsync({data:i.data,path:i.path,parent:i});case 2:if("aborted"!==(r=e.sent).status){e.next=5;break}return e.abrupt("return",M);case 5:if("dirty"!==r.status){e.next=10;break}return n.dirty(),e.abrupt("return",A(r.value));case 10:return e.abrupt("return",t._def.out._parseAsync({data:r.value,path:i.path,parent:i}));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o()}var u=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return"aborted"===u.status?M:"dirty"===u.status?(n.dirty(),{status:"dirty",value:u.value}):this._def.out._parseSync({data:u.value,path:i.path,parent:i})}}],[{key:"create",value:function(e,t){return new r({in:e,out:t,typeName:He.ZodPipeline})}}]),r}(J),Fe=function(e){h(r,e);var t=_(r);function r(){return u(this,r),t.apply(this,arguments)}return d(r,[{key:"_parse",value:function(e){var t=this._def.innerType._parse(e);return W(t)&&(t.value=Object.freeze(t.value)),t}}]),r}(J);Fe.create=function(e,t){return new Fe((0,x.Z)({innerType:e,typeName:He.ZodReadonly},K(t)))};var He,ze=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return e?le.create().superRefine((function(n,i){var a,s;if(!e(n)){var o="function"===typeof t?t(n):"string"===typeof t?{message:t}:t,u=null===(s=null!==(a=o.fatal)&&void 0!==a?a:r)||void 0===s||s,c="string"===typeof o?{message:o}:o;i.addIssue((0,x.Z)((0,x.Z)({code:"custom"},c),{},{fatal:u}))}})):le.create()},Ke={object:ge.lazycreate};!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(He||(He={}));var Ve=te.create,Je=ne.create,Be=Le.create,Qe=ie.create,$e=ae.create,Ge=se.create,Ye=oe.create,Xe=ue.create,et=ce.create,tt=le.create,rt=de.create,nt=fe.create,it=pe.create,at=he.create,st=ge.create,ot=ge.strictCreate,ut=ye.create,ct=me.create,lt=we.create,dt=be.create,ft=xe.create,pt=Se.create,ht=Te.create,vt=Ze.create,gt=Oe.create,yt=Ee.create,_t=Ie.create,mt=je.create,kt=Re.create,wt=Ce.create,bt=Ue.create,xt=Ne.create,St=Ce.createWithPreprocess,Tt=We.create,Zt={string:function(e){return te.create((0,x.Z)((0,x.Z)({},e),{},{coerce:!0}))},number:function(e){return ne.create((0,x.Z)((0,x.Z)({},e),{},{coerce:!0}))},boolean:function(e){return ae.create((0,x.Z)((0,x.Z)({},e),{},{coerce:!0}))},bigint:function(e){return ie.create((0,x.Z)((0,x.Z)({},e),{},{coerce:!0}))},date:function(e){return se.create((0,x.Z)((0,x.Z)({},e),{},{coerce:!0}))}},Ot=M,Et=Object.freeze({__proto__:null,defaultErrorMap:P,setErrorMap:function(e){I=e},getErrorMap:j,makeIssue:R,EMPTY_PATH:[],addIssueToContext:C,ParseStatus:N,INVALID:M,DIRTY:A,OK:L,isAborted:q,isDirty:D,isValid:W,isAsync:F,get util(){return w},get objectUtil(){return b},ZodParsedType:T,getParsedType:Z,ZodType:J,ZodString:te,ZodNumber:ne,ZodBigInt:ie,ZodBoolean:ae,ZodDate:se,ZodSymbol:oe,ZodUndefined:ue,ZodNull:ce,ZodAny:le,ZodUnknown:de,ZodNever:fe,ZodVoid:pe,ZodArray:he,ZodObject:ge,ZodUnion:ye,ZodDiscriminatedUnion:me,ZodIntersection:we,ZodTuple:be,ZodRecord:xe,ZodMap:Se,ZodSet:Te,ZodFunction:Ze,ZodLazy:Oe,ZodLiteral:Ee,ZodEnum:Ie,ZodNativeEnum:je,ZodPromise:Re,ZodEffects:Ce,ZodTransformer:Ce,ZodOptional:Ue,ZodNullable:Ne,ZodDefault:Me,ZodCatch:Ae,ZodNaN:Le,BRAND:qe,ZodBranded:De,ZodPipeline:We,ZodReadonly:Fe,custom:ze,Schema:J,ZodSchema:J,late:Ke,get ZodFirstPartyTypeKind(){return He},coerce:Zt,any:tt,array:at,bigint:Qe,boolean:$e,date:Ge,discriminatedUnion:ct,effect:wt,enum:_t,function:vt,instanceof:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{message:"Input not instance of ".concat(e.name)};return ze((function(t){return t instanceof e}),t)},intersection:lt,lazy:gt,literal:yt,map:pt,nan:Be,nativeEnum:mt,never:nt,null:et,nullable:xt,number:Je,object:st,oboolean:function(){return $e().optional()},onumber:function(){return Je().optional()},optional:bt,ostring:function(){return Ve().optional()},pipeline:Tt,preprocess:St,promise:kt,record:ft,set:ht,strictObject:ot,string:Ve,symbol:Ye,transformer:wt,tuple:dt,undefined:Xe,union:ut,unknown:rt,void:it,NEVER:Ot,ZodIssueCode:O,quotelessJson:function(e){return JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:")},ZodError:E})}}]);
//# sourceMappingURL=3590.7b8cfa87.chunk.js.map